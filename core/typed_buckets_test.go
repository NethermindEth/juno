package core_test

import (
	"encoding/hex"
	"testing"

	"github.com/NethermindEth/juno/core"
	"github.com/NethermindEth/juno/core/felt"
	"github.com/NethermindEth/juno/db"
	"github.com/NethermindEth/juno/db/memory"
	"github.com/NethermindEth/juno/db/typed"
	"github.com/NethermindEth/juno/db/typed/key"
	"github.com/NethermindEth/juno/db/typed/value"
	"github.com/stretchr/testify/require"
)

type testCaseData[K any] struct {
	key      K
	keyHex   string
	valueHex string
}

func testCase[K any](key K, keyHex, valueHex string) testCaseData[K] {
	return testCaseData[K]{
		key:      key,
		keyHex:   keyHex,
		valueHex: valueHex,
	}
}

func runTest[K any, V any, KS key.Serializer[K], VS value.Serializer[V]](
	t *testing.T,
	bucket typed.Bucket[K, V, KS, VS],
	testCases ...testCaseData[K],
) {
	t.Run(bucket.String(), func(t *testing.T) {
		values := make([]V, len(testCases))
		keyBytes := make([][]byte, len(testCases))
		valueBytes := make([][]byte, len(testCases))

		var err error
		for i, testCase := range testCases {
			keyBytes[i], err = hex.DecodeString(testCase.keyHex)
			require.NoError(t, err)

			valueBytes[i], err = hex.DecodeString(testCase.valueHex)
			require.NoError(t, err)
		}

		t.Run("Read", func(t *testing.T) {
			database := memory.New()

			for i, testCase := range testCases {
				require.NoError(t, database.Put(keyBytes[i], valueBytes[i]))

				values[i], err = bucket.Get(database, testCase.key)
				require.NoError(t, err)
			}
		})

		t.Run("Write", func(t *testing.T) {
			database := memory.New()

			for i, testCase := range testCases {
				require.NoError(t, bucket.Put(database, testCase.key, &values[i]))

				require.NoError(t, database.Get(keyBytes[i], func(data []byte) error {
					require.Equal(t, valueBytes[i], data)
					return nil
				}))
			}
		})
	})
}

func TestTypedBuckets(t *testing.T) {
	runTest(
		t,
		core.TransactionBlockNumbersAndIndicesByHashBucket,
		testCase(
			felt.NewUnsafeFromString[felt.TransactionHash](
				"0x6e22f4f235c78dd2ca4e286ca355b21f7aa171567ada192be4cb06cf115cbd1",
			),
			"0906e22f4f235c78dd2ca4e286ca355b21f7aa171567ada192be4cb06cf115cbd1",
			"00000000000e2f6f0000000000000016",
		),
		testCase(
			felt.NewUnsafeFromString[felt.TransactionHash](
				"0xa9e5f88a32f23f653f8738a7cac3acbd42eb98109e31f519f498594b629c18",
			),
			"0900a9e5f88a32f23f653f8738a7cac3acbd42eb98109e31f519f498594b629c18",
			"000000000007fda30000000000000008",
		),
		testCase(
			felt.NewUnsafeFromString[felt.TransactionHash](
				"0x5d50b7020f7cf8033fd7d913e489f47edf74fbf3c8ada85be512c7baa6a2eab",
			),
			"0905d50b7020f7cf8033fd7d913e489f47edf74fbf3c8ada85be512c7baa6a2eab",
			"00000000000000c00000000000000016",
		),
	)
	runTest(
		t,
		core.TransactionsByBlockNumberAndIndexBucket.Bucket,
		testCase( // 0x6e22f4f235c78dd2ca4e286ca355b21f7aa171567ada192be4cb06cf115cbd1
			db.BlockNumIndexKey{Number: 929647, Index: 22},
			"0a00000000000e2f6f0000000000000016",
			//nolint:lll,nolintlint // Ignore lll for literals, nolintlint because main config doesn't check tests
			"da00010002af6354697000654e6f6e6365841bffffffffffffeec11bffffffffffffffff1bffffffffffffffff1b07fffffffffedad0664d6178466565841bfffa199865c969811bffffffffffffffff1bffffffffffffffff1b079bb31ec26001906756657273696f6e841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf06843616c6c4461746196841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf0841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841b15e10e40b421a5791bacca9f130d3d10fb1b8189ac289670a3fd1b07a71beab795f1e4841bfffffffffffffdc11bffffffffffffffff1bffffffffffffffff1b07ffffffffffd9d0841bce012d962b43fb2f1be991da21c3905d251b7aa25ac6b0ae3ca21b00821ba7a16e2aa1841bffffffffffffeee11bffffffffffffffff1bffffffffffffffff1b07fffffffffedcf0841bffffffffffffffc11bffffffffffffffff1bffffffffffffffff1b07fffffffffffbd0841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841b4525d3152776283b1b18d0786142a2207b1b29c20276821926121b06be5feb0c76c1fa841bffffffffffffff811bffffffffffffffff1bffffffffffffffff1b07fffffffffff790841bfbdd519250212a091bffffffffffffffff1bffffffffffffffff1b01b26ab75233ca98841bca5d0386220a58b21bfffffffffffffffd1bffffffffffffffff1b002d3be842afe3d1841bfdf30739385db8451bffffffffffffffff1bffffffffffffffff1b05237accbe393c94841bdbf499218d910cad1bfffffffffffffffe1bffffffffffffffff1b033e2b3a66a1d77c841b753a41fc0ba29c6b1bad61b31d1a6b8d8e1b9eabed86c7fd2b731b079b815ffc3c281c841b2f0bf77b70470ceb1b7b415bdeaf3a634d1b6d214bdabc46f3161b03c27c7cdb4e6e17841bffffffffffffff611bffffffffffffffff1bffffffffffffffff1b07fffffffffff570841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841bab99f92ed3a9eaeb1b729819a9bd9b66cd1b874c49abf918e9cb1b041e5721a4e92849841b87cd9153711ffdc01bffffffffffff78791bffffffffffffffff1b04a6a68a831fd9bf841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf084000000006946656544414d6f6465006b4e6f6e636544414d6f6465006d5061796d617374657244617461f66d53656e64657241646472657373841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb79766e5265736f75726365426f756e6473f66f436f6e747261637441646472657373f66f5472616e73616374696f6e48617368841b63d099754a5261681b22bd755705eacd3e1b7ff4b48b496b78f11b049446e583e95e1672456e747279506f696e7453656c6563746f72f6745472616e73616374696f6e5369676e6174757265898400000000841b316e6438588e7efc1b7c84defbb2a9617e1b2f753d21dec905d21b05abd123d868b19a841bb43119a88ea6c6331b6f0d86ca9269aace1b4ad85f7e702103e71b0215aad3e1f7b50b841b494460d046d518391bd5fa1dab51ce44e81b966c636687512f9e1b079b3b2dc2e142ca841b051e9680f8d071731b0632d4264d8b38251b0a4cd75ac46213e21b02ea5547ea881532841bffffffffffffffa11bffffffffffffffff1bffffffffffffffff1b07fffffffffff9b0841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf0841b0c86e5b7b50f680f1bc5854bb3d1262ce41b449b3a8d3976d7ff1b01d56597fd403072841b0d1654fa8a37e4e51bef4244645753dd5c1b1d69b140f2e98c4f1b00d11e2ef95f6eb9754163636f756e744465706c6f796d656e7444617461f6",
		),
		testCase( // 0xa9e5f88a32f23f653f8738a7cac3acbd42eb98109e31f519f498594b629c18
			db.BlockNumIndexKey{Number: 523683, Index: 8},
			"0a000000000007fda30000000000000008",
			//nolint:lll,nolintlint // Ignore lll for literals, nolintlint because main config doesn't check tests
			"da00010004ae6354697000654e6f6e63658400000000664d6178466565841bffd2a392578200011bffffffffffffffff1bffffffffffffffff1b04fcdcb7cfa200106756657273696f6e841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf069436c61737348617368841b85ba9e57247867311b11fbdaa42b6665a01b2758ea1aa0eb7b4e1b07008fc6515ac70b6946656544414d6f6465006b4e6f6e636544414d6f6465006d5061796d617374657244617461f66e5265736f75726365426f756e6473f66f436f6e747261637441646472657373841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb79766f5472616e73616374696f6e48617368841b21ca5efc9f464afb1be8c397ce0c36c6ae1b79251da08f0001661b01338fb54d4cb2eb73436f6e7374727563746f7243616c6c4461746184841b3b738b1e1eede9991bb08100b6487eb7401b29cfc87b045d6f3b1b0567c2489f90cf5b841be22de44d4c109d6b1b3caff725883bfa2c1b9b32ea1a8d747f1c1b015d4c2c5c7ef72d841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf0841b180c6e0adc048ac21bf29335199e69d61f1b932bd8905cc9e9931b0251c6eef7a35c0173436f6e74726163744164647265737353616c74841b180c6e0adc048ac21bf29335199e69d61f1b932bd8905cc9e9931b0251c6eef7a35c01745472616e73616374696f6e5369676e61747572658a841b81d85d664522854c1bf1c884146caeb3011bdb2c787f186469a71b0786634136665d53841b714e6a60a327e9401be721a01c8b1a95d11b4e779f010d3348be1b0510cefdc2cc55dd841bfca2be29fae730601bbe3da24cb18fc1871b476746e01aeb44281b03097f7929e16fc28400000000840000000084000000008400000000840000000084000000008400000000",
		),
		testCase( // 0x5d50b7020f7cf8033fd7d913e489f47edf74fbf3c8ada85be512c7baa6a2eab
			db.BlockNumIndexKey{Number: 192, Index: 22},
			"0a00000000000000c00000000000000016",
			//nolint:lll,nolintlint // Ignore lll for literals, nolintlint because main config doesn't check tests
			"da00010003a6654e6f6e6365f66756657273696f6e84000000006843616c6c4461746184841b5a3cc786d8b708611b8abee348f2247f9d1bfffffff571676d6f1b06093ff464278e70841b77f857a9df5599221be5c7e9dda5c061df1bffffffea80e44f781b077dd247d4af2b41841bffffffffffffffc11bffffffffffffffff1bffffffffffffffff1b07fffffffffffbd0841ba6925330608795121bd11e55a797c0bb831bf725e4ebd4c9f1e81b07ad90a616d9073f6f436f6e747261637441646472657373841b963af307e7e3e3f71b4cdcb75971a790b81ba76f0787e0b1ef1b1b0081b352effccd8e6f5472616e73616374696f6e48617368841bb518d1e68578cb371ba1a600c320154bf01b175a169a0a06da101b0404824abe0b902d72456e747279506f696e7453656c6563746f72841b4a9a0ae0118392261b96c52fe07abbe00f1b38d2a6d9596b30e31b07bbfba5010eb578",
		),
	)
	runTest(
		t,
		core.ReceiptsByBlockNumberAndIndexBucket.Bucket,
		testCase( // 0x6e22f4f235c78dd2ca4e286ca355b21f7aa171567ada192be4cb06cf115cbd1
			db.BlockNumIndexKey{Number: 929647, Index: 22},
			"0b00000000000e2f6f0000000000000016",
			//nolint:lll,nolintlint // Ignore lll for literals, nolintlint because main config doesn't check tests
			"a963466565841bfffc20379d935d011bffffffffffffffff1bffffffffffffffff1b07be23b176c92d10664576656e747391a3644461746183841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf0841b67590e0feb062e8d1b58bfaead9d799cbc1bd4b8ba13533c93871b011d8273cee68a61841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf06446726f6d841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976644b65797382841b089e987a1fe2b0581b4ec44789749d61b01b5d108f09812c02a41b065f93c6d6d8f7de841b6f840a410ebc0fd71bea8703d42466d5af1bf1d8402a00ec4faf1b02d4a954b6af6fd2a3644461746184841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841b753a41fc0ba29c6b1bad61b31d1a6b8d8e1b9eabed86c7fd2b731b079b815ffc3c281c840000000084000000006446726f6d841be40a73515f73e20e1b126613f79b170c141b473fb2720d40fa271b067fbd255e486be6644b65797381841b3f0bd58490e61bdf1b16e4c70c05be823e1ba4ce442e87bba9df1b013c08693dd41621a3644461746184841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841b753a41fc0ba29c6b1bad61b31d1a6b8d8e1b9eabed86c7fd2b731b079b815ffc3c281c841b87cd9153711ffdc01bffffffffffff78791bffffffffffffffff1b04a6a68a831fd9bf84000000006446726f6d841be40a73515f73e20e1b126613f79b170c141b473fb2720d40fa271b067fbd255e486be6644b65797381841b8feab324d5e53a511b65269108cdd1d68b1b555302d1982573e31b035c33f66989dcf9a3644461746183841b84c98b41c75e50d41b1a5cc817c04f1d7b1b68b5ca7fba0faab11b033eabab134d72f3841bb21fa16f886831921b6b3d4aa89e8d0bb31b23de01fd71797c321b0213ab8b360adc0d841b753a41fc0ba29c6b1bad61b31d1a6b8d8e1b9eabed86c7fd2b731b079b815ffc3c281c6446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841bdda06ba191fbac8c1bbcced87217a24b7f1bbb70197dd9041cd01b03fdda83a920e1c2a3644461746183841b98516bbe178a6dc01b2c6c64c3c3d8aa201b00bfee1c38b9d6331b030accae03ef77628400000000841bc7036b0b768214691b0efb941300fb3c471bcf8f58e854420b1e1b02776f511d3433786446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841b68efe8d28d4dbe2c1b0074b8d15c39732c1b21dab05460f3c1891b01a7147a49335d62a3644461746183841bc7036b0b768214691b0efb941300fb3c471bcf8f58e854420b1e1b02776f511d3433788400000000841b84c98b41c75e50d41b1a5cc817c04f1d7b1b68b5ca7fba0faab11b033eabab134d72f36446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841b68efe8d28d4dbe2c1b0074b8d15c39732c1b21dab05460f3c1891b01a7147a49335d62a3644461746183841b84c98b41c75e50d41b1a5cc817c04f1d7b1b68b5ca7fba0faab11b033eabab134d72f38400000000841b84c98b41c75e50d41b1a5cc817c04f1d7b1b68b5ca7fba0faab11b033eabab134d72f36446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841b68efe8d28d4dbe2c1b0074b8d15c39732c1b21dab05460f3c1891b01a7147a49335d62a3644461746183841ba136f44ef45c4fd31b0fcd23a354d582d01b9535e0e02bb9e22d1b04caca3f4107b9d48400000000841bc7036b0b768214691b0efb941300fb3c471bcf8f58e854420b1e1b02776f511d3433786446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841b68efe8d28d4dbe2c1b0074b8d15c39732c1b21dab05460f3c1891b01a7147a49335d62a3644461746183841bc0cb75adf6832d4b1bec3a690d0bbba29b1b809a0c82ce55d3491b00680931dfdff0498400000000841bc7036b0b768214691b0efb941300fb3c471bcf8f58e854420b1e1b02776f511d3433786446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841b68efe8d28d4dbe2c1b0074b8d15c39732c1b21dab05460f3c1891b01a7147a49335d62a3644461746183841b08b8796885dae2d71b207242493427abb11b0a1e0a6e9fc5a9911b020303579e480efa8400000000841b84c98b41c75e50d41b1a5cc817c04f1d7b1b68b5ca7fba0faab11b033eabab134d72f36446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841b68efe8d28d4dbe2c1b0074b8d15c39732c1b21dab05460f3c1891b01a7147a49335d62a3644461746183841bab40dbdc8d95c31e1b9bb1bdaa8dec81991bab3694e9f9a7620f1b01d47799334fbba6841bb21fa16f886831921b6b3d4aa89e8d0bb31b23de01fd71797c321b0213ab8b360adc0d841b753a41fc0ba29c6b1bad61b31d1a6b8d8e1b9eabed86c7fd2b731b079b815ffc3c281c6446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841bdda06ba191fbac8c1bbcced87217a24b7f1bbb70197dd9041cd01b03fdda83a920e1c2a3644461746183841bab40dbdc8d95c31e1b9bb1bdaa8dec81991bab3694e9f9a7620f1b01d47799334fbba68400000000841bab40dbdc8d95c31e1b9bb1bdaa8dec81991bab3694e9f9a7620f1b01d47799334fbba66446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841b68efe8d28d4dbe2c1b0074b8d15c39732c1b21dab05460f3c1891b01a7147a49335d62a3644461746183841b84953242f23c75751bcbbcb9133978cb561bd6dbbb7060cb23bb1b0715df2bf1131b4a8400000000841bab40dbdc8d95c31e1b9bb1bdaa8dec81991bab3694e9f9a7620f1b01d47799334fbba66446726f6d841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6c644b65797381841b68efe8d28d4dbe2c1b0074b8d15c39732c1b21dab05460f3c1891b01a7147a49335d62a364446174618184000000006446726f6d841b753a41fc0ba29c6b1bad61b31d1a6b8d8e1b9eabed86c7fd2b731b079b815ffc3c281c644b65797383841b2c5ab72d813f83e51b419af3f1fa4995c51b4186beaed7d8d7801b01d83e299d1c0e44841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841b07acf0b6d0dcffcc1bf094b14ddcce5d441b58bd5d7463ad10be1b003912ccb2511b6ca3644461746183841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841bab99f92ed3a9eaeb1b729819a9bd9b66cd1b874c49abf918e9cb1b041e5721a4e92849841b87cd9153711ffdc01bffffffffffff78791bffffffffffffffff1b04a6a68a831fd9bf6446726f6d841b753a41fc0ba29c6b1bad61b31d1a6b8d8e1b9eabed86c7fd2b731b079b815ffc3c281c644b65797382841b78b487feb6d7de4f1bcba3397f5993b7f51bfa1ef8eddf0dcc1b1b0528da12cbc11261841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976a364446174618484000000008400000000841b87cd9153711ffdc01bffffffffffff78791bffffffffffffffff1b04a6a68a831fd9bf84000000006446726f6d841b753a41fc0ba29c6b1bad61b31d1a6b8d8e1b9eabed86c7fd2b731b079b815ffc3c281c644b65797382841b05536dc91c0356b91b932a231cd79222811b156f3a3a9e80cafa1b03e8b9387fc2a428841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976a3644461746184841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841b01dd36371af4d3611bc506b39fc441c9bd1bf1d1e08379718c631b04c3562dc1b970a8841bfffc20379d935d011bffffffffffffffff1bffffffffffffffff1b07be23b176c92d1084000000006446726f6d841b3ccac76a36b03ed21bf7924a722e227b4f1bef42360e4b3d525a1b05d0732bf7eb4e99644b65797381841b8feab324d5e53a511b65269108cdd1d68b1b555302d1982573e31b035c33f66989dcf967466565556e697400685265766572746564f46c526576657274526561736f6e606d4c31546f4c324d657373616765f66d4c32546f4c314d657373616765806f5472616e73616374696f6e48617368841b63d099754a5261681b22bd755705eacd3e1b7ff4b48b496b78f11b049446e583e95e1672457865637574696f6e5265736f7572636573a565537465707319c3d16b4d656d6f7279486f6c6573007044617461417661696c6162696c697479a2654c3147617300694c31446174614761731908a070546f74616c476173436f6e73756d6564a3654c31476173188c654c3247617300694c31446174614761731908a0764275696c74696e496e7374616e6365436f756e746572ac6445634f700665456373646100664164644d6f6400664b656363616b00664d756c4d6f6400664f75747075740067426974776973650068506564657273656e185a68506f736569646f6e18636a52616e6765436865636b19080d6c52616e6765436865636b3936006c5365676d656e744172656e6100",
		),
		testCase( // 0xa9e5f88a32f23f653f8738a7cac3acbd42eb98109e31f519f498594b629c18
			db.BlockNumIndexKey{Number: 523683, Index: 8},
			"0b000000000007fda30000000000000008",
			//nolint:lll,nolintlint // Ignore lll for literals, nolintlint because main config doesn't check tests
			"a963466565841bfff1eea776d0bb211bffffffffffffffff1bffffffffffffffff1b0710d91ee3dc6d30664576656e747384a3644461746181841b3b738b1e1eede9991bb08100b6487eb7401b29cfc87b045d6f3b1b0567c2489f90cf5b6446726f6d841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976644b65797381841baae76a27feece8011bdcc7ade84af743a21beced963b9d0df4fb1b05f78ada61a8fab2a3644461746181841b180c6e0adc048ac21bf29335199e69d61f1b932bd8905cc9e9931b0251c6eef7a35c016446726f6d841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976644b65797381841bb72291e8314f239f1b70adfba95f02bcd41b501de78ec3f678011b063ce6634fbabedea3644461746181841bfca2be29fae730601bbe3da24cb18fc1871b476746e01aeb44281b03097f7929e16fc26446726f6d841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976644b65797381841baae76a27feece8011bdcc7ade84af743a21beced963b9d0df4fb1b05f78ada61a8fab2a3644461746184841bf324eb5d2cb521861b7bc34c7f7060b6a61b23270ffc5d31dbed1b02cdfd6e3bcb7976841b01dd36371af4d3611bc506b39fc441c9bd1bf1d1e08379718c631b04c3562dc1b970a8841bfff1eea776d0bb211bffffffffffffffff1bffffffffffffffff1b0710d91ee3dc6d3084000000006446726f6d841b3ccac76a36b03ed21bf7924a722e227b4f1bef42360e4b3d525a1b05d0732bf7eb4e99644b65797381841b8feab324d5e53a511b65269108cdd1d68b1b555302d1982573e31b035c33f66989dcf967466565556e697400685265766572746564f46c526576657274526561736f6e606d4c31546f4c324d657373616765f66d4c32546f4c314d657373616765806f5472616e73616374696f6e48617368841b21ca5efc9f464afb1be8c397ce0c36c6ae1b79251da08f0001661b01338fb54d4cb2eb72457865637574696f6e5265736f7572636573a5655374657073191d216b4d656d6f7279486f6c6573007044617461417661696c6162696c697479f670546f74616c476173436f6e73756d6564f6764275696c74696e496e7374616e6365436f756e746572ac6445634f700065456373646101664164644d6f6400664b656363616b00664d756c4d6f6400664f75747075740067426974776973650068506564657273656e182268506f736569646f6e006a52616e6765436865636b18916c52616e6765436865636b3936006c5365676d656e744172656e6100",
		),
		testCase( // 0x5d50b7020f7cf8033fd7d913e489f47edf74fbf3c8ada85be512c7baa6a2eab
			db.BlockNumIndexKey{Number: 192, Index: 22},
			"0b00000000000000c00000000000000016",
			//nolint:lll,nolintlint // Ignore lll for literals, nolintlint because main config doesn't check tests
			"a9634665658400000000664576656e74738067466565556e697400685265766572746564f46c526576657274526561736f6e606d4c31546f4c324d657373616765a562546f841b963af307e7e3e3f71b4cdcb75971a790b81ba76f0787e0b1ef1b1b0081b352effccd8e6446726f6d545474c49483aa09993090979ade8101ebb4cdce4a654e6f6e6365f6675061796c6f616483841b77f857a9df5599221be5c7e9dda5c061df1bffffffea80e44f781b077dd247d4af2b41841bffffffffffffffc11bffffffffffffffff1bffffffffffffffff1b07fffffffffffbd0841ba6925330608795121bd11e55a797c0bb831bf725e4ebd4c9f1e81b07ad90a616d9073f6853656c6563746f72841b4a9a0ae0118392261b96c52fe07abbe00f1b38d2a6d9596b30e31b07bbfba5010eb5786d4c32546f4c314d657373616765806f5472616e73616374696f6e48617368841bb518d1e68578cb371ba1a600c320154bf01b175a169a0a06da101b0404824abe0b902d72457865637574696f6e5265736f7572636573a565537465707318c16b4d656d6f7279486f6c6573007044617461417661696c6162696c697479f670546f74616c476173436f6e73756d6564f6764275696c74696e496e7374616e6365436f756e746572ac6445634f700065456373646100664164644d6f6400664b656363616b00664d756c4d6f6400664f75747075740067426974776973650068506564657273656e0268506f736569646f6e006a52616e6765436865636b066c52616e6765436865636b3936006c5365676d656e744172656e6100",
		),
	)
}
