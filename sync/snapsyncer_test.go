package sync

import (
	"context"
	"encoding/hex"
	"errors"
	"math/big"
	"net/http"
	"os"
	"testing"
	"time"

	"github.com/NethermindEth/juno/blockchain"
	"github.com/NethermindEth/juno/core"
	"github.com/NethermindEth/juno/core/felt"
	"github.com/NethermindEth/juno/db"
	"github.com/NethermindEth/juno/db/pebble"
	"github.com/NethermindEth/juno/encoder"
	"github.com/NethermindEth/juno/starknetdata"
	"github.com/NethermindEth/juno/utils"
	"github.com/prometheus/client_golang/prometheus/promhttp"
	"github.com/stretchr/testify/assert"
)

func hexToFelt(str string) *felt.Felt {
	flt := felt.Zero.Clone()

	bint, ok := big.NewInt(0).SetString(str, 16)
	if !ok {
		panic("set fail")
	}

	return flt.SetBigInt(bint)
}

func V0ClassFromString(key, bytes string) (*felt.Felt, core.Class, error) {
	clsHash := hexToFelt(key)
	cls := &core.DeclaredClass{}
	clsBytes, err := hex.DecodeString(bytes)
	if err != nil {
		return nil, nil, err
	}
	err = encoder.Unmarshal(clsBytes, cls)
	if err != nil {
		return nil, nil, err
	}

	h, err := cls.Class.Hash()
	if err != nil {
		return nil, nil, err
	}

	if !h.Equal(clsHash) {
		return nil, nil, errors.New("recalculated hash missed")
	}

	return clsHash, cls.Class, nil
}

func V1ClassFromString(key, bytes string) (*felt.Felt, *felt.Felt, core.Class, error) {
	clsHash := hexToFelt(key)
	cls := &core.DeclaredClass{}
	clsBytes, err := hex.DecodeString(bytes)
	if err != nil {
		return nil, nil, nil, err
	}
	err = encoder.Unmarshal(clsBytes, cls)
	if err != nil {
		return nil, nil, nil, err
	}
	compiledClsHash := cls.Class.(*core.Cairo1Class).Compiled.Hash()

	return clsHash, compiledClsHash, cls.Class, nil
}

func TestSnapOfflineCopy(t *testing.T) {
	scenarios := []struct {
		name     string
		scenario func(t *testing.T, bc *blockchain.Blockchain) error
	}{
		{
			name: "basic contract",
			scenario: func(t *testing.T, bc *blockchain.Blockchain) error {
				expectedRoot := hexToFelt("07391bf3b040e9df8ad739f0b0be3aa2d83f6c5260f7b745549be2432122d369")

				key := new(felt.Felt).SetUint64(uint64(12))
				nonce := new(felt.Felt).SetUint64(uint64(1))
				classHash, cls, err := V0ClassFromString("000118cec7463a59c23203e8e4dd7769a914da30c68d7b5ff404531b1e85de9a", "a262417419d22165436c617373da00010005a5634162695908355b7b226d656d62657273223a205b7b226e616d65223a2022746f222c20226f6666736574223a20302c202274797065223a202266656c74227d2c207b226e616d65223a202273656c6563746f72222c20226f6666736574223a20312c202274797065223a202266656c74227d2c207b226e616d65223a2022646174615f6f6666736574222c20226f6666736574223a20322c202274797065223a202266656c74227d2c207b226e616d65223a2022646174615f6c656e222c20226f6666736574223a20332c202274797065223a202266656c74227d5d2c20226e616d65223a20224163636f756e7443616c6c4172726179222c202273697a65223a20342c202274797065223a2022737472756374227d2c207b22696e70757473223a205b7b226e616d65223a20227075626c69634b6579222c202274797065223a202266656c74227d5d2c20226e616d65223a2022636f6e7374727563746f72222c20226f757470757473223a205b5d2c202274797065223a2022636f6e7374727563746f72227d2c207b22696e70757473223a205b5d2c20226e616d65223a20226765745075626c69634b6579222c20226f757470757473223a205b7b226e616d65223a20227075626c69634b6579222c202274797065223a202266656c74227d5d2c202273746174654d75746162696c697479223a202276696577222c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a2022696e746572666163654964222c202274797065223a202266656c74227d5d2c20226e616d65223a2022737570706f727473496e74657266616365222c20226f757470757473223a205b7b226e616d65223a202273756363657373222c202274797065223a202266656c74227d5d2c202273746174654d75746162696c697479223a202276696577222c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a20226e65775075626c69634b6579222c202274797065223a202266656c74227d5d2c20226e616d65223a20227365745075626c69634b6579222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a202268617368222c202274797065223a202266656c74227d2c207b226e616d65223a20227369676e61747572655f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a20227369676e6174757265222c202274797065223a202266656c742a227d5d2c20226e616d65223a2022697356616c69645369676e6174757265222c20226f757470757473223a205b7b226e616d65223a2022697356616c6964222c202274797065223a202266656c74227d5d2c202273746174654d75746162696c697479223a202276696577222c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a202263616c6c5f61727261795f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a202263616c6c5f6172726179222c202274797065223a20224163636f756e7443616c6c41727261792a227d2c207b226e616d65223a202263616c6c646174615f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a202263616c6c64617461222c202274797065223a202266656c742a227d5d2c20226e616d65223a20225f5f76616c69646174655f5f222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a2022636c6173735f68617368222c202274797065223a202266656c74227d5d2c20226e616d65223a20225f5f76616c69646174655f6465636c6172655f5f222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a2022636c6173735f68617368222c202274797065223a202266656c74227d2c207b226e616d65223a202273616c74222c202274797065223a202266656c74227d2c207b226e616d65223a20227075626c69634b6579222c202274797065223a202266656c74227d5d2c20226e616d65223a20225f5f76616c69646174655f6465706c6f795f5f222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a202263616c6c5f61727261795f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a202263616c6c5f6172726179222c202274797065223a20224163636f756e7443616c6c41727261792a227d2c207b226e616d65223a202263616c6c646174615f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a202263616c6c64617461222c202274797065223a202266656c742a227d5d2c20226e616d65223a20225f5f657865637574655f5f222c20226f757470757473223a205b7b226e616d65223a2022726573706f6e73655f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a2022726573706f6e7365222c202274797065223a202266656c742a227d5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b5d2c20226e616d65223a20224465636c617265642066726f6d20737461726b6e65742d7273207465737420636173652e2054696d657374616d7020286d73293a2031373131353832303039313838222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d5d6750726f6772616d793c284834734941414141414141412f2b783943322f634e72726f583948317863576d5864654870455253436b347534447254316c6a487a725764377535744130476a346468437870705a5363356a692f7a334137316d394b416b6b714c473432344b6e4c4f78527678652f4637382b496e383432675442512f73364b5678424437626f504966684544755033683062427774764d5137656d6e386467512b5734446141454336584337542f30742f425a39682f6a3849325050794237706373764a706463516966326a326a624273344e486c4d76736c706237323147383942656c666a6164672b33537849394f796b5657517372414c31726245392f376f41564c686f53437a4c6c69776c507476586c4b4b537134716c48624b5a55744768566554514f4954337a4c4a6b6a4271555551674d616d316c5151714a4f46554a4147415755424b6e337131703668344f7138394e59756e66753270565478646249565955756a734b4b5262386c4e536350334834696d70503555534143575957715559434b624967735169715341774e616e5a456b52644a55686c316b76734e644b61503671515670755a677945506d39516979347773536a424742424e49326f726a637858483530363776344e7531736845395239486b456b7049673631434734524f7563534f6d39704c53716574736d66743869586e3235735564747943434f454c5063317556734a7441774c4e703961567074773546582b6d774e632f342b55513031516576455747735246626f6f6774326f42783759354161674c75636562686434704768634e743377677531546e7173715a7062585974566c3253714972697369642b793276754f53565663574553792b4f7555705546585366756e43463575394c6149754730477754466554355656347a556161526b56546678656d3772506d754a726c597749534668645a446d6c4f5a3630574e6c42625a75485244744b6f586e4a514a715a504a56536855793143574e546757514c546974503247736b6b6c57313770777970614330466d3163582f635856474d6a76792f66364a36736c6551434e373457596b534e6b2b65484e4a446c6953383057665966636d377233384c4553346e4941666876723447517154776a5052495336544f703450434c4c6d6a756e34624f347332494935434547346f4973355a67785361386d51505763554951765067516339354d30584e7651646579693366306f313252705278357a443076464f5334624e2b68415754374845303459387836383370314470525132684a794c3776536d476264664949467a6969495355572b77646f4e4e6369766a4636636b672f70374e6a35544f465542553464767049304e4c4357632f386c7a676762794b6b354b72496d51416d41523750636d5a7264457335454f37526c367834316a49732f73533061666c6452716b437335754370326d423278776335475568334b4a73376c507035656e353963514f6d4a616b7a6e47646771354c667077717a4b4c61514d337252466e63556e6d503230786b6a303178317369622f466b3169534c4a3539676332694375376d713744564d4f3366554536476d487153334d6f5a6d317851757073396c345a5934586869594443396a7978723779344a52574e4e67766e4f55435179635653396e66726a736d586736356a4758656453334575706d6e6c4f677a5a3869455459396756564c6178456846776673396e5a666a6f335044424c4b5633746355333044733667726b514578366b6b594b6a484535386151396c5045665772576e3036676841756e706f544e6d6566625a64315a49586c62342b7644424f7a3571452b702b4758634f6b4c31736a6c6e623833612f756a744a53497871392b756b563251775959737257354e586f4d64586b79573276547132476e6a626f57425853725765726535637757327874562b7437583378642f53324d4b74512b426d4964733539365a54702f61475139647967626459744b6254746637692f2f4d7049316c3250794e39573442355738696973667375746448627379383776634e596d6a324246665a6e4a6a4a502b64764d32564f72396251374b4266675254335034656d61796154546d3132716e7532623264774e36764b587873547849335165426370493042656875386845383472574c3352702f52524f716e656e59734b61744d4a3676713270456b62447377734661336b4f2f687231742f773845787636553463563172752b6e4e374f76356e644244556a357a39586e2f2f38615a4a4d655a39666258384f4f6777474f73756553656a6f7359586d38712b436959357061613030647461614858734d75397459526332395a516e62336e2b664a323368665a78652f7166592f6474336877417a6177686265304939542f6d625a713143327154686b4578654a3053397a524a616643496f50714b597435366139594a5238645371397a354f5552786443737a30694b634b3771707072684c7561734475755333734c56386d3069472f706168464a327a5261665852755130657a3847746f6e37783973394979616e4a78594a6151366277756549706d347a4b38784d352f6e375178436d624d375758585052585437546b6659666e4a52337261627a6b50745a502f4b58466b31554a37442b3769644c4a546453334255783033444c7538457955734d4d7855664e77544c527273625062453533576e4d6d66335a786248792f6f364a4e357a675556746d75646c75346b72426455366c2b786c34304275362f767164317a496b425044515a6b582b4756516b4d69512f6f6b4f702f636f5675566c674e65497731795371727272546932384f59645a3034734257667a62616b323650636e574b7278336479576d6370544c517334784d554357304f6d2b4c68303935574c796647522b64505352395937315a726d6e6a38744c6270654739764456374b307a307137374c7972465a6258315a5939355a667a3149707837342b4e6f2f6c6a734571434d4d354f6c4e6d7742597469467162765231353478317a2f6e766b66306a2b5a7634697a4b4441506b6b39426e412b2b4438496b48666e4845556a482f33486b7278665a515463503747456466666e4e3237773358686b787533746759524b6665497646692b3953474a3776737a674f3569766d7876353677334c7363654a46487a353545547678765342616e2f6a7268346431654f4b745675757373747233652f4657537452797466376b4a70486e66776a434f3763344c65655049322b7a665a6a3966526574487a64484c773177624279746c3875594a656b665831504f325a4a464c50535a477977793772352b2f5a6f434a6e5565507a36344c4578596c4c5077346f2b2f684839356151534c2b47544677712f796244367742332f7a705966502f4958795051564f3454436e51726854426a4d4975566967565a644c61507a77796f432f68366b6f2f485759424f456a632f3331356b735133686d764447674553794d302f713842444c614b6d51454f58564a34684b53612f4b657753374852746a703944704a436d77356566306966705342633579332b4576766561755865652b466978614b54374939554e70486e4a79394b2f2f43712f4d6578555137594a4e4772564938716677744a4a767458794a4b5339324a3858426450313174312b6c524568617169676b4d4b4a455a4856516770696b4c5770746b76367a7557754f6b4446726e65596847784f4435416762654a564a473671556671625749616f6a634c3056744151505446374232363842746b716f6a6630696a2b426a6d4e4362444b436244374a79424f3170463378397949655973444648795650425742597a304372354c5245445175424932706d4b412f52554843446c6a53475830716f695a36525a3352305a41314b644e4d4159656566486144634c6b2b51456c5871464f524d39586e51776f71476c4b6d705a516247683038624e5a525967514a69354c316568582f487634654c7150316739475654586e4a76667559424b76594b495a366363796978413343684e3278365065772f76654c6443363837376950352b6c6a343157326550434d2f324f387654352f4d2f73396e426550357274482b5744444d2f37376c54452f4e705a2f53596639345830316774674931346d78596e46734a506465614b776a672f33723056735a79647049416630782f3372796c3553702f3233384649514c7777734e4c2f4972417a494d786e2b6c5164544c666c386e39797a697649424f666739584c4c784c376d505843786475454334436e3858474b2b4f3346393678416234374e6c374d6a52384d3739694136622f7a635438593050676870526c39393534372f69526552386d4c7259414d7a69752f6766652f67666370377755742f325759476247386432487258665237794437377138634657786976754750512b392f672b31524978666f316c58356c485a79716b5046584137342f4e6e7066414f6d71393858766f57455978694c342b4c4265764f6a6b356a6962346f7847392b72583262567275722b632f2f7a4c6439384e4547454f4559484569494263496c424268507771784576752b395967586e4a2f556c6a4169726c4c746c4a4b722b30524b396b324253646541564a6979507a6f7065484944576c4d55657266796955307054336c6b327a42764658632f2f5671784d4a352f354e6a3979305448536a444e6e7847624474396245505169504346783973357031634765673563777435794759536f7a755a6577326b75306865316b50716438642f356b3231452f6537592b503333334563577362513267424e58352b564c57786866542f34793657516c7970506c61484b547963354e516968466465596e59566d71674b69682b466c523253314b30436665597548477756336f4a593852792b59702f333254524366464f7441397a6964772b356f623562467239794257694672623054317a736e336e35434f4c677555584e7964754e31536c6f695a516646616c5a796538464246575a367771374253557151565579687530746f7068393051436b4561436c69572f61707079486836676b6932362f734e6d774237545630364365497a7a68474d7138473053636f4d6b556d546e426c6b75676b794b4e657a62754f3644463453756d3735522f2f656e794e7473574253332f7a3778313247635249392b736f3655536e3031797a48354e66715353776339465a64334c486e374f4638462f742f59463565464b514675784a4c484b46526947676e7656566e4e45767a2b654934664e326b416a382f446845564c7a326361474366696a464d64573546716a46636d57366c2b57744e70334d396d622b34384b5a74422f4b7533436859335731632b656e6f746362334731486b71766c3333593871336c7a445856654b795671366c7448657275626b372b4352734c70692f38694a56646d756c50474c32737475734c7a3852753576562b6f7369743756636d2f54474932492f6d5974795866615a2b592b70436f38335779786f74756b502f767068453678593548356b55527973772b773270424f4954724a384c614d2b347931395875556d574c4177435a5942692f4c7371507a74354e5433313439686b6a31637344674a51693870344b34334c50773332327a594b6c3155354f2b6472494a353545566674754f4f6a61506b5334375057775665665053314973667972544e767454714e49752b4c4b706f6467483538502b5a4e4e542f6d4b794565746f34554c2f756a5845484654546a3953482f7834767652474b74412b74467441385a6f6e4331492f59677253702f683350697069524c37324468614d48386465636b36796d324b66553559464871727a42704b694d7648304d2f6f36774a36636872643564713566467974334e4237714b6c782b39586a7a4f546e7055356e75784e6571695675336c6e7a523857715574764a754e2b536b79342b4d7050614471735067613068557072362f525a3436674461464b462b69725a655935656363776438662f5131485249482f326246316e483561373473364a62322b634e6d466668424969483132704347394f766251344f697a3856544e7371315237576c4c3231484f597271387231582f476f326b794d706d766e61614e715470754b4163695474776e63466b6457685468586c77424c4b635a314873397973716c426652437a65724d4f5970527239306b69524842766c732f7a7637372b724f704c306639304657775a6830472f394e2b662f663362316b33747864585a36635a4e682f756974486c6d6851535734624c336242464a4a4b4c654f435a74777047506151523332544d313376376b6d656464556b614777622b6f613838303543666f4e2f7453707a31793334354478436857414f747a43626747326377384f304f55657474416c3345526a544e4e64724c773464752b392b46374d5656516d43347050316f3447655850724750764e374a37453748617a6f646e38646f44316d474652474e69744874445931554d4c754a5152566f654d744d4630347278564d7153783235633332784b6e554f79744b4959706f78674668796f577a6876367a634366794d434c79644275337756635a664f75376a39747a647245547475736d7a74562f5a5a64655876496f6c75764e70533077394930424e4d715a6b454c36787a7954437972562b6b314f4b2b716648516f6578576573704a5874783872576d365474705a2f444e676e4166577551687a53372f6137645632705342634d534c6347536c426a7538643855396d32674c7031647575473869714a7541725834492f523457314465572f46574b676c76623953334e7a61334e6d4d5a584f714d6f4932303451365a4466383978744b4b35666762666471577a57546e6b7776726f6c6851504f2b6c314b39466f75434e74302f37706e59395a38697957764e524c63444b56365664523874444d6f754a4f6147515174626f395a777355516f624c2f62304e575166586f3757626f584b305450376a4850784d716d6a70367857505155312f6459533768736456395646423579696861434d617746646c446a2b514d6179684f55763534763947743969774a52316538662b45332f4f36545562515478593962434968734232696a6b7a594c662f464b7035446d634a623949464f4144376a534c7674666c6c30556430495955584753594e6d4a363147466e4d73584f363746527459695858562b4a394f6a38736446512b484b506435747469554a7435565048526d57625842524b597950383245696c754e743354685a65346f6c764f336549754e73634c436c7a4f436c2f574c69706c765057576478756d6f37566c464444326334433766614f6c7254643159464c57694676634d504c5279787853396e322b6e6978506f4e4a486251516b3271756f672b494c736652774e4854306345332b4c49336f50723357457472304e52746436615533545841466b667a394659353668393431493730456246476273654a7062695a3151465a7a5072364f302b6b3155656943554e6f6e4435792f7178784d4165724c36794e3670336f67695156324372474957644c54326a486e4259524171684f657835754578456170387567784c732f704d62724a2b2b62335576612f5a696d6a534749616e35675a3178714e766d6b6671485673354a39674b54524c517a307259674d30326431677630694d734f31452f664e49306837424f55326a774741717636674d436f6c553979334e2b43337542444f3572396769777366746f6744474768316b6251746d6659566b57486169446b384138386654476974342f70554f67424a574764566461564d59742f57794f2f46735942435830454856424644314e47543077564f77685246653350476b504d666149776a4f32363649456d595930334c35597969717a35734f6b69785074774e58645a5574466149577731566739586772696164696e6b6753664e514c77654c5174466d79516454454f3468717476596f4a7978375473736462653859634435306b67694e416d337651324f4761564a3071316d776d50316b6e563434656f51463463616d734c366f456c4575706268794e74615638537a6e485a5371475a7a386c465042494a793547743041753472376733774e4d49685442622f4268413958517763494778554842794150586b73374f67544a596f6635486441467248436f5835525357325361674156477165506e4d4f4c65354d7630305a32656e5a426b676865736477794c583743424c57766f64586b6448424c5a4b6a69546133446738595a68485372717668677a5954394a357172336a62554e6a675a7732315a6734494664656164714c31447147684a386f6d6e45416a6c7a4c5052676279767a484f497154466d506c6e754f595470365a4c50496370475a5a3944774b654964454a48466159597936477061735362314f3546683366596e76685157563053677479762b5049674a694679784663395176426c7734675130473133365371496b306f566e625052314f6e623552474e3054494f494d34785a4c4830435754786b4576767065374d5736324b4c326d4b376d3252446d32687a324156704b4c42586e6f416a76366b366576675a316b4b4a4d716335616648494f76345a627538785641736f2f5744577a6c584c316c6e66315573315a5449776b6268484757307654436630544743676c624e39796e7444366c46664d725877632b7378303242446d6368425074672f45595874564e48384537456b345432346d366464626a3634735a7374647a3544476a7239686c4e58474e3842522f574a436c6243355547572b694865536732304b4a7961743176495a78453534754976464e3178446d32595a797146796a476148674e78444d4b666b393768713655614455594d6866554d2f6d632f3974783441504867557470774c5448684575524d736b713434346c6274356d356e366f376d56435237667a72474d6134304e356b43624a455271494e446957506f6a50784c394d39445736697669476a714a4c58394b35366d2b676e79534e79596a795673472f5765566244456a62483136507338594b6d6a476d32414c54554f4b6d62394677624938305852724d746850634e3575566b7433554b343071726d6d734d38362f316e4c6a64687373306c364f61324d625a6173643050344d35305771436b4348627869412b6b786378484d2b61314a316e76704f6f73786631706b39634169597845664648536b39517530504f7366357031686253732b443144373438716d7969566a374f714150346a4e7847452b5a55385369367741396c687676496538766d3072636f4e322b69446766324979303342613255646262416133724445383330486149707970394f6d7834414f6f334f3159526f61367a51565878543248633964746870545774646a647356615753745869697a6c5a736537364453493665466632334c3472562f666b624264506d64633263514c332f545538717335664b5a42584a6669376e6c615671764838567a492f304333546962474c71544b494b33317373716c56457a76474e6f394b494a69704e5a724d444e6656555a356a30716d6f625a504f7970733651336e62665534523039595a314a564830627142706a4f5574784650623172305833794d4a6a35752b58777a53346d4844646653516c5472646c463057782f3230744336395364615264386334594c5251467a467655664538324a7a4f3836536f4e486d654861697050552b4753612f6e6159503874674b526c742b65747852622b4b6632576f585a753176376c4c386c71775a4369374d6f4958364b67714b425335327148495957736e626b3545364d637943654e69655734644c6b785371774768354136424d346e6157584e6c6c3666523448356a656e4a792f4150533535636f5261335679396430783945647941492b39447a7372504d3852314f68757978374c4f4d2b6a6e2f4f6e30346d596d4d59767a39587056444a4b6673674f6f6e7079666e70316476627538646339663830696f6a58314d676c57634830377068556e4d6861464177657a3644424938696f416443486e387a633169395a6c6f515a496e3576623639504c6d394f7a322f4f72532f58563266584e2b64616b734652347346597265536474444e6b5965316273675442416d45746765387848626b664934766456717a54334c6f414e6a396e3478536835626c677a34367a434a504439527a4458724d4f527057415a687675542b77487a662b794374376a487a4e7965374c6f496d4f486d43376c69536659334549735669517655473351596752576f4b3665716770776c4b6a614c6c7876584368627552556457493351567877714b344155474e676f6b764e2b37464838547569726c5a5269444f2f6f4f58334c762b7736593657683731336f3954694465724946486874547053487531484667584c4c323765694656766b524d6a596563524f6b437030355463373843346a394a4267757532656d45506b396f5663312f50666a7039643348726e72352b63333770586c39647a4754584633314a31757a6d35757a713876623636714c4d6c6b7241434a6945517475303644674d3156527743357336434e69576a51572b394f6a4e304344475464676d77596841697a6a386d77446c594c2b5a335a362b50723039625446676d545a463143456163467a507a6d626e763836756d7a6967435947446f47574e6d654a364a7279566b596b74674b457a446a4246304a3164766e737a757a373938574c573168396f49575253694d646a61594b47324b6255786e536b2b715367753259595968505a44674a4541343675475461784361684a7942677475767a31394f4c3864524f7968527a4c495251354934522f64656d574b76726a3665335a4c7955627239326232635873375062717573344d784a6a61784c62354a77374a6f7578485a6746694f6841544f4d49356453324d2b6b394f45674c3937767a79316e62666e50366a727261595078734336344a74305661696357345962456439566e5367374a3653414e7a2b61716f7367416b49374e6c50325a372b4e31686a464d416a57314473576a766e4a6343543034734c392b7079566f66304177534551704236435141784e5446466a6f3354774977416443787341684d35674a725541734243474750627472464e4b48535179512b75413154737337413558467854462b7132494448734c705159456c583851624655713743666859757767392f6462392f386e43304176776758586a2b376e396452382f3275667272732f6662723668394b69306c78356c3974526b35454655537a5730617852596235376d5964684d6e4a7a482b622f6d2f47304c2b47424338443745464d7a4d664755614d366a3958525675614d6a70757a484b433452326e5249754e456573726c69687254714c68506262635269783958676e32777733743059697a2b4c53766d6a5a52544855697248332f7a6d436a6156313571644f504553316764793033364b452f3948704d57416c736267756f474e64456d364279347546304d6b546e43544e3675597859733175464946576943306167456d774a30775834445537386943423855496f536b6f67796a6449454c58567762524767646f524863665449466c6544746b74574337754e632f427537624777636533644d563539704c784f3577525632642f4c6a7864585a333977302b5a664f6a67734947382f2f77425a7547353738504456492b2b6674374d59397633542f666e56644c7a625938706c76412f5454727774345a503174646e5a322b6a66333750547436646e353754394c336d2f304d6c39672b656e647859563766586f375339466b736d3455412f6c466f704749327678305646546b38647a63706a685331584e2f6d6c3363336a524b49574f78544c537a4b304742396e316547647a3545585268364b356b2f486d3271564d624f356151387543737a3058506a754357666c45517149346553306d527558694c52625a684e624444796b7436386d6f6537343864554931554676716f6e644174334c4730547246524b59652b2f4668504748334d6b6e4c6357505331514e703550345638534f6241485533712b704e5555766370477a45576136466e6273512b7369686d4c67735867536354765575483341466f4e483168484e7946624f4575676f39757842356b2f57527276444a4264515634326c7173574c4c3463764130506758774235626c31616d372b65583870306153596c6f413263676b784548414d57324c6d4a594e6251524e44444841467157556d4b426a44314b656743644a4a2b6f6b374b5574614c696c596837634257467938754f70564e747342634275517936444d5a4b4d344f343854457a4a74536b50516d4e567567444343394946464337744c644265796e70562f71375033422b76336c31796d3232484f716d325938644e306c4f73426d723477346774486e3232474b38744c56422f567256704d497231795177666c737a535630336850612b46745a663972717234746974433561586b53504e35777556736c59774479426835386175616b314271556f6777736a41325459494968546145446b5a4549516c73347072646e745a786a515a35436571314a57416847396870466f7363514e4a38466d426745384276524a5043424c7646424169314562574a4137464b6461754a43645635636b774c32644345304c524e4378424348597763322b356f6535504239426230546a327962594951635279467a6f4d6d70683770565a564d49646474597471623947356d5a322f647439666e623262754c2b632f2f7a4b553252505470425942314449684a546143304a4c723168716934654c713738496b4947705245316b6d744d634c50435068657661473078356f49355846537761662b62573857447044623266474b6e36532b62576466386e636f544a61647374646d6b484f39727a6b7a514a6371434f334355737850466e326e4f4c6d5a6336712b73544c6e525870436d4c33337977612b44696c612f7779594b7646466f513645654536584c44457a626b624a356f474b485761486b735a75772b50717a486971515053515644384c356c4e69423643556b447142425566676f78566e796f5952574a795145396453436d6f655070346b524e537046556a685045576a4b51416a7159416a7152413571536e726b52754641573176475145485673346f366735794369556b2f6255612b4f63696f4f4c524c76763774546457375851504a364d63766b387873756d4d4d5a5438765365746b724d67657a364e4f695362786e755844714d492b52796444693656413548465370476836524c355a42556f574a30574c7055446b7556617853656344396a523857544c636f714a427869564e795274393864307962794a36755a633268346f74536754636b366b5633323149677068342b6d4a396335395256716f624d564d4c70495374626a7a68756f553161424e7072412f47485a565659306b615670476773486a6c626b774b363334765343486b3034383131764955396947636d4c34547249554e61336e41777465735a384e325233636e332b4c556f4b434b4f4a475873795546324e684134476b694876365974384f316f4f65495756422b347855696f676a4b616b6242564d316756336f2b5455686a616577494f716a764c6f4f6f5169615a57757739687972787a6a34363243685a6377742b517a3439746c4b2f6241565057744b4f6a32517835502b6450576e5265426e3768656471664e796576415430367a667772767a48554d62327a4e79587a4774596e595235647a5248425053302f4950764647614f2b4779676f4939652f4d6c616f696a532f4e6865657173584f3668322b6d6d5839796b2f3579396868397a4b56624471336662434d792f4f5430347530763956345671523649426a435a73305934517a57644d6c4b48334772472b634769784945416d686851597072556f52695a4671474f36546732784a6851684b434673474e5347324948453873424e7258544879317145644e474e734359514e4f47556c2b5331636e366558627031672b3173616c46546366434546416241456f4a73544331694f5859447157576952437754574935694e6f4555477961794849734730494d5452745a4e67515532635332415345416a5350726e33563977496751516830454b4d5451746b3167457874546a444731495849733238516d734b434667415653796c4d6562476861794c4653455347454d63493267526151366869716b3656306d6b305069456b30376572363961782b754e4950446a477a646851434d51594f67734347446f41494f7a6243304d514f784a62745348333457456335346e68754966696144732f4a7577442b3965677433496a4677654a5275736a534843376e4d427665566c7942326d353630674d6c7671702b415a316449624f664536733777417764647941716334466a453271482b497633493866692f636978654439794c4e3650484176324936657634767172375a4e6864712b532b71756b353156616635554f713645747059626458315565774f5a564e3348373353446f706d4f363432576c53546d6b5478497a446e57662f642b48532b2b7836674c6c2b756f4279746e33596f5332546963382b684375503457757433483965792b385930657978785679454d706c374a3041476a375a4533624a38346e44496f39697056527945464244424c3133754b686672434e425864347266665872374e704637625a7462454c69514f6a594a6a5164516b786932525a4d4d335762554949524a6852595567764241524a4d54756334746977437147506246447555596b6f77535663344e7161325a574a67645234384c4547432f767959683056546c7377443759315355652b497232725a7757564c467248515a356c7a716271646b76616a33337776546c34734e385a666a52632f574e386446326479766b2b486578733369547a2f517844657564734c594f366939654f6d5342703232763731613956546266484b536d492b53684a7a665a49776e316f53504f65694b70636d4c47315377694f6b64467947515671446e34482f6251762f766648584e4958653372676e6a734c574e4248786832446a73732f2b366e48425847385876577666456132384f56754e676a783348344c774d613569674d425552704530636730493063544a526a49323255696558624b5236456f326549414f4a396c4939684a6d6b2b6e43624449717a435a71595461337550467831744561585a4a5263545a5269374e396f70414a7446704555653837465033476350655a6f395232774259685a77306f332f445665346d4f4b415671745966476143554b47706349356171423270665361346c4c44597a7963596b4c344b446a55704e6935626a55432b6a4a34314b5475733634314e525579636a55784b4d784d6a56427930576d396d684a64357a5a33506a49424b453266317a6852693430745566726b34564d614a7047467545364b587556633270726c78734e72776871427778756f55686378693843574e4b31746f633254352b4a42772b6b336c33564845652b6947664e5878612b394661355561584f6e5a6f443767616861554f376a75466976643738464f55307156433447372b66655651506b5457794a316a4e314f4472696859316f50343654494c776b626e2b65764d6c434f38557036774652744a6e6772624c3944595376724c714b6b305656316e6a7072527165546d6b492b56594e2f5545693947786f7337476572335a655864624a6b4b496e4667764b6c7642302b38505a324e663263747631703932537a4c6c745a7a55496970466563635331397449344b73664e4f6c746c44412b31516d584c654946304b2b383843346476776c574c44705a42664e784975686951774d6c616a4b70666f2f37684f3277597a344c4874555675304f387030364248634a395831492f54464339505668552b745678616f6a33306a6778346e4d3174572f55526e795970765931576731682f4469585270694f55554d59784f356e6478323676727a32314965716f592b59762f3749797076716846487668716d6837626c67757967466a463859443247545779754c5157766b564e7a6265506f2b2b33696372774b2f6665465058344b3176613837456d2b683349364a78586f704b396d5a4a5a57644455704e61566b75423755784a2f6d374175565274516a792f59694b366942662b68664b67796731725a30483864536e52597357374542716d397675306d58336170522b6432776f34684e6177494b755a67365958565845372b61675754634855715a737541476b525a6630796e70776770752b543476575649484b31712b376c5543716c72395079576e30756c57672b69516e5663775a4c626d796935703730386b455a2b2b572b4136675862386b355a665469352f633745365247765051746978434c5174516b77494859306a6b767359727762636854374458332f7863514654484f5a385a56484f48565846626b55677564782f6333552b3830567853573553786774444e646f4156713244623453704b732b635358415074666f385261694a2f67704f4453684c4b572b673871584e756d6e6659655a4a48325453786a377041542f4c2b764362752f64376556324c66622f6d33697657705373416c44646d4f754b5371373762536c56424f6630646369576b6633344e6c2f77705a736b32726b6e586b3362475430396576727a6d4e634f713371316e32304e3055586153384f66324865334e3764583336383877397635323961562b73686762446352667377757368444e78356f4e7236566f36574666575832506457712f6a6b4c4533767a713475623639507a3237646d396e46374f7a327176346c4f5149324e6845314c596f5241685a466c6b326741366c743257686f3564754e313175747a745a686d734432666851744271445a2f63582b39636947392f6b6c73567758554c2f6d642b3976316d48637147653150355756526c474172575a43644367546b714a2b724b784c4f4d303955375a6966724957374c51377a72516c672b643669305655486a456a5575597243353475483256507353396c4a6c306f75595667785436644c6b6656422f412f6f503565376b596e4f5a305950334d466f4a61314a423153365a6d2b5974414533544764764c79655863782b50723264755a6e503472737143416e466a675549704c614a414c47524352314349616e3371456d3571693365432b6a2b636e72352b6d4a3233594864524e5143454e73414f52545a466b5957785a6a59466e4a73596c4948517073514374485147536b396c4c793975506f6e487a6e464343434c324468645167353950396d4e675731573679394b716c594d6e637756352f43486e5844374541494a34427a333636677262493169645a6c7163376b724c343764657938575849317a764c516265367445334f476d7170644b624232356973365841304851455765375a716e3433475730667469745377635074716a4d2f654239504b494b4e5762792b5636375033373242393674534c74646637394f4e414749614d54336371314e33574b706e306f6e6c6a4a336e30756e6c44585033707a6675724e665a3563644b544e454e7144414d514845474a676d70705a447261477a6c7271785051544a37435072507a3149595052592f2f474266556c5872714777707151444246556a74645a55453176672b79375a33484e57397650733173327631373538392b6248726977415770594e624163435970735949784d41614a6b32426369304d45434132744c727854622b322f4d3373357662307a64764f784b5237476f345946495445555349685731694934695269536d3171594d6f70685244694a55546b5a53534e41756258627670596e313263384d6e4a4b55697a622b6f44553348424e53324c4174687977596d674a526747774a45724b4872362f71704b4a6575765851514242334c775359424e7343574179304b55336b3446454154554543514252316b49774147372b72724a655a6d39762f657a5337506871514373594f6741327a5478445a3048456942436242704132776a427a735767656c504b545534565a7778424e332b777a322f2f4f6d7167777754556f41633077454957424169434579415276462f2b772f3335767a6e793950626439657a66754e414e73484974414367466f5555456f516f425941366733635a64754e6e79592b7274662f68386a48316345716573674669736b79326a6d63346f3231375741556b6e4d785766536e47353243387a4c566b756a4a4e4a374c693038456950352b6270362b34345535373938766e6266444134735237324978696351646c6375505a6f707259666970344a6a47684668396135483934687453576f795a472b38777071576e313368672b3831597246703157466d594b664e614254476c504e557a546d564d446a573572346e4b68512f59485a55743849657068733650516b4c306b56326251786d315235426872536730776b7870544864654535745245704e32672b4a7a6f6d5950444d716f4f5565706956576346547866504e2b6b456850376f4d4e57434d3656784e5a464e5a313174544c724e7134735854664e77554162574b5531747a504a4e4c43376665786f62752f313848693758716b77576f36653070787a4664465a55777464744f33573652386e336f4f796b49612b526a50467449766e73427156576a6c4f6748492f6b5a7a3739684e2f55506f4254346e3048596c724c32654b5a306e777153446732704c364a78756467764d77507a4a726134745042596b65733258377a30647244366a74416f716277652b716b75546a2f386672302b703935493831515634746c456d5361466b5955573943784961595559476f526841473148597770686735434e72497341676b6d796e744b4e614c3475306e49704151675168334c5242524153436c794d4352457562586e497068485876516c5851637261555a312f475465706f4c6b2b625567636f67664b65676e3749623554326739764a3639765467396d376c6e463664642b3563495977417359434a494c637330715930524a51425332795245656276796d6d31576e732f4f306c6c5255704561674830726878613366444f37664f322b6d6433636e50343863322b7655732f63345a464e414b6b44624570734535695736546941516f66593245475753536b463674756f5a62503739657a30646363574c6743324134686a6d68536b73303441734243773051673358434c392b2f5835626366474d6349327367476b47434362576743446c46644343484b6f7163347343786476386f4d4a62746358384f5a4c7242774a4f6b434e31634e6b4c6430667666472b724e626567754e70657678544f616831474144664f3330766478424374395479547947756d6264516b33706c2f47547874344a6b4f5036325a53794c515775657a364639704a7831685638707464626a586a6c534869304d2f6c7141632f7673704975646771532f5230482f7958686941505936745a5776335455666a6a6451743143534537386d393546466364352f4b6967673331382f686f6d722f41334d672f665a58544a783939367a4e7532374e4a432f4e753372754534694c34793950456c755a30383956776e3639313451757347695071446e5173467748666f4e776e54634b646735382b6e2f33303559686a632f72364639554c7a4136557869574161505a5a49426f3674396647414e314e633333723047456c673537544d74715974503947416d4658424e5635735045543279586c6670745535673939464b31633846586d5a486b52776278624f5878636b6b346f637643564b6a6675715349494b6d7a4d664e626856617835783148763353666559374c55392b45546e3642585764676a523443424939727379694f41346f6472704d70775476574f4a79756b7a796f34324256762f61527158755a4c7467715a2b484c6f4e7174466361676e6b59726f6c445a62642f71722f34636e632f32306950784346694172664577544c574e7732416c4852514a756545396562525643494f79757879554b625a3661444d387051325151646c616e645176495170703770395965356f463956414e744a4a6361464e3561616179505134716c366f422b53716d6e54324f4b764771357264565a4f5171527857453438576c395548564e5a704364796d4b754b307243366e5a51467454737653376253717652373572616e3630366b43787a675856514d796b5763716357687853467867682b4f4853764b3633552f78786b7444754f716c5a5846584a5734696c315343312b474a654c416b485244526c4458524c6764453947564e564b63444b73363563714e79647964336c355a57443152466f753643326c4361567972757658323052744a6f6c39554e37544238566f322b6271655661626d2b524b6d4764514a7656494d2f316831314170503052356b4244687a4e4c4f4b50634764435a4866364979767a5236617750384a542b4b4e50323132796a467a63766f4a636830504b73497a33534255775931775366356474307533574f6766615042674833474735734a78414c666354434f4b613048506c43485335726a593053642b4675322f73786a4b2b693354354c6b773766526557394631457a48643972664c71506e696864316363414c4448712f35324679566f766b5478324e6a583573623078636e4a43776c54422b624a7257663670553733484d68634b324572774a63784c78583457416438434c756e57455a416a676f4347516c3149356a7135684168444b4e7532424443384952583445783076626f51686e47586c6d633955306b5342665048704979475a6672426f6d676475655831596c554354764d757135644776674e6d424c455272684d6a755139696f2b6a414f6971796f53512f525234364b57705748696f506e56545a6c3676314a77363146526271314e666a5071724839324352317a534c4c6a41577838463878647a5958323979786f37574778622b6d323032624257454a77575a4a36763838346555334c37665430353362496d38567834697667355858397959725a5a48373750706c4a4474676d3069356e734a57786a4a5a364e73684b754c4657476e4b6c5a4548486d786f7070534f4163745666615a2b59384a6b78646d78466959524636595a4372626c434a464e536c5361367755726563697876665a436e332b654666755a6f5350713958582f776b4141502f2f304551477335726f4151413d6945787465726e616c7388a2664f6666736574841bffffffffffffc6611bffffffffffffffff1bffffffffffffffff1b07fffffffffc2c706853656c6563746f72841b30b9224cd18a4e7c1bc71f0c828480ecb01b8de0747c8cfdb4821b04c9700ad999c431a2664f6666736574841bffffffffffffa8a11bffffffffffffffff1bffffffffffffffff1b07fffffffffa32b06853656c6563746f72841ba6951e73bb6dfe241b05e5ff539dbeebe71bdd254888370955b41b043ef1349908885ea2664f6666736574841bffffffffffffbb811bffffffffffffffff1bffffffffffffffff1b07fffffffffb73906853656c6563746f72841bb22ea4840c873b8b1baa7fdf9303e1d7731b704e592f223c3de61b00bda65049efea59a2664f6666736574841bffffffffffffcde11bffffffffffffffff1bffffffffffffffff1b07fffffffffcabf06853656c6563746f72841b279f5f4dc8b4c7b31b6ac884a41a1b5bd71bc1307f4321f00b881b04bc8012967069c6a2664f6666736574841bffffffffffffc1811bffffffffffffffff1bffffffffffffffff1b07fffffffffbd9906853656c6563746f72841bc735e82ed1e23e011b9ee8c8991bbc1d151bacb56cf03bbaac5a1b00186ed02a71bd65a2664f6666736574841bffffffffffffb4211bffffffffffffffff1bffffffffffffffff1b07fffffffffaf6306853656c6563746f72841b04b9244ab52a4b811bffdbe496a2c48be11b8a5d0118067bf13c1b07102404b615fdd5a2664f6666736574841bffffffffffffc9c11bffffffffffffffff1bffffffffffffffff1b07fffffffffc65d06853656c6563746f72841bf6c53d175ebbcd9f1bdd07ee6aca2299561bd457faeea1e288671b0754ebc0b261e0b1a2664f6666736574841bffffffffffffaf611bffffffffffffffff1bffffffffffffffff1b07fffffffffaa5706853656c6563746f72841b4298606763e030411ba7525ed75dc70c951b01c0a0b4d48ac5061b0624e8d006b62cda6a4c3148616e646c657273806c436f6e7374727563746f727381a2664f6666736574841bffffffffffffd2411bffffffffffffffff1bffffffffffffffff1b07fffffffffcf6506853656c6563746f72841bd1c59afcd3f9742d1b083befda3709a3ed1b3142bfd1003b62e21b041f80cbf54be289")
				assert.NoError(t, err)

				return bc.Store(
					&core.Block{
						Header: &core.Header{
							Hash:            &felt.Zero,
							ParentHash:      &felt.Zero,
							GlobalStateRoot: expectedRoot,
						},
					},
					nil,
					&core.StateUpdate{
						NewRoot: expectedRoot,
						OldRoot: &felt.Zero,
						StateDiff: &core.StateDiff{
							StorageDiffs: nil,
							Nonces: map[felt.Felt]*felt.Felt{
								*key: nonce,
							},
							DeployedContracts: map[felt.Felt]*felt.Felt{
								*key: classHash,
							},
							DeclaredV0Classes: nil,
							DeclaredV1Classes: nil,
							ReplacedClasses:   nil,
						},
					},
					map[felt.Felt]core.Class{
						*classHash: cls,
					})
			},
		},
		{
			name: "basic with storage",
			scenario: func(t *testing.T, bc *blockchain.Blockchain) error {
				expectedStateRoot := hexToFelt("05e69846cb070d495023a6700872cce39a9be8457b2243fcf8d87d8edf7c8784")

				key := new(felt.Felt).SetUint64(uint64(12))
				nonce := new(felt.Felt).SetUint64(uint64(1))
				classHash, cls, err := V0ClassFromString("000118cec7463a59c23203e8e4dd7769a914da30c68d7b5ff404531b1e85de9a", "a262417419d22165436c617373da00010005a5634162695908355b7b226d656d62657273223a205b7b226e616d65223a2022746f222c20226f6666736574223a20302c202274797065223a202266656c74227d2c207b226e616d65223a202273656c6563746f72222c20226f6666736574223a20312c202274797065223a202266656c74227d2c207b226e616d65223a2022646174615f6f6666736574222c20226f6666736574223a20322c202274797065223a202266656c74227d2c207b226e616d65223a2022646174615f6c656e222c20226f6666736574223a20332c202274797065223a202266656c74227d5d2c20226e616d65223a20224163636f756e7443616c6c4172726179222c202273697a65223a20342c202274797065223a2022737472756374227d2c207b22696e70757473223a205b7b226e616d65223a20227075626c69634b6579222c202274797065223a202266656c74227d5d2c20226e616d65223a2022636f6e7374727563746f72222c20226f757470757473223a205b5d2c202274797065223a2022636f6e7374727563746f72227d2c207b22696e70757473223a205b5d2c20226e616d65223a20226765745075626c69634b6579222c20226f757470757473223a205b7b226e616d65223a20227075626c69634b6579222c202274797065223a202266656c74227d5d2c202273746174654d75746162696c697479223a202276696577222c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a2022696e746572666163654964222c202274797065223a202266656c74227d5d2c20226e616d65223a2022737570706f727473496e74657266616365222c20226f757470757473223a205b7b226e616d65223a202273756363657373222c202274797065223a202266656c74227d5d2c202273746174654d75746162696c697479223a202276696577222c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a20226e65775075626c69634b6579222c202274797065223a202266656c74227d5d2c20226e616d65223a20227365745075626c69634b6579222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a202268617368222c202274797065223a202266656c74227d2c207b226e616d65223a20227369676e61747572655f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a20227369676e6174757265222c202274797065223a202266656c742a227d5d2c20226e616d65223a2022697356616c69645369676e6174757265222c20226f757470757473223a205b7b226e616d65223a2022697356616c6964222c202274797065223a202266656c74227d5d2c202273746174654d75746162696c697479223a202276696577222c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a202263616c6c5f61727261795f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a202263616c6c5f6172726179222c202274797065223a20224163636f756e7443616c6c41727261792a227d2c207b226e616d65223a202263616c6c646174615f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a202263616c6c64617461222c202274797065223a202266656c742a227d5d2c20226e616d65223a20225f5f76616c69646174655f5f222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a2022636c6173735f68617368222c202274797065223a202266656c74227d5d2c20226e616d65223a20225f5f76616c69646174655f6465636c6172655f5f222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a2022636c6173735f68617368222c202274797065223a202266656c74227d2c207b226e616d65223a202273616c74222c202274797065223a202266656c74227d2c207b226e616d65223a20227075626c69634b6579222c202274797065223a202266656c74227d5d2c20226e616d65223a20225f5f76616c69646174655f6465706c6f795f5f222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b7b226e616d65223a202263616c6c5f61727261795f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a202263616c6c5f6172726179222c202274797065223a20224163636f756e7443616c6c41727261792a227d2c207b226e616d65223a202263616c6c646174615f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a202263616c6c64617461222c202274797065223a202266656c742a227d5d2c20226e616d65223a20225f5f657865637574655f5f222c20226f757470757473223a205b7b226e616d65223a2022726573706f6e73655f6c656e222c202274797065223a202266656c74227d2c207b226e616d65223a2022726573706f6e7365222c202274797065223a202266656c742a227d5d2c202274797065223a202266756e6374696f6e227d2c207b22696e70757473223a205b5d2c20226e616d65223a20224465636c617265642066726f6d20737461726b6e65742d7273207465737420636173652e2054696d657374616d7020286d73293a2031373131353832303039313838222c20226f757470757473223a205b5d2c202274797065223a202266756e6374696f6e227d5d6750726f6772616d793c284834734941414141414141412f2b783943322f634e72726f583948317863576d5864654870455253436b347534447254316c6a487a725764377535744130476a346468437870705a5363356a692f7a334137316d394b416b6b714c473432344b6e4c4f78527678652f4637382b496e383432675442512f73364b5678424437626f504966684544755033683062427774764d5137656d6e386467512b5734446141454336584337542f30742f425a39682f6a3849325050794237706373764a706463516966326a326a624273344e486c4d76736c706237323147383942656c666a6164672b33537849394f796b5657517372414c31726245392f376f41564c686f53437a4c6c69776c507476586c4b4b537134716c48624b5a55744768566554514f4954337a4c4a6b6a4271555551674d616d316c5151714a4f46554a4147415755424b6e337131703668344f7138394e59756e66753270565478646249565955756a734b4b5262386c4e536350334834696d70503555534143575957715559434b624967735169715341774e616e5a456b52644a55686c316b76734e644b61503671515670755a677945506d39516979347773536a424742424e49326f726a637858483530363776344e7531736845395239486b456b7049673631434734524f7563534f6d39704c53716574736d66743869586e3235735564747943434f454c5063317556734a7441774c4e703961567074773546582b6d774e632f342b55513031516576455747735246626f6f6774326f42783759354161674c75636562686434704768634e743377677531546e7173715a7062585974566c3253714972697369642b793276754f53565663574553792b4f7555705546585366756e43463575394c6149754730477754466554355656347a556161526b56546678656d3772506d754a726c597749534668645a446d6c4f5a3630574e6c42625a75485244744b6f586e4a514a715a504a56536855793143574e546757514c546974503247736b6b6c57313770777970614330466d3163582f635856474d6a76792f66364a36736c6551434e373457596b534e6b2b65484e4a446c6953383057665966636d377233384c4553346e4941666876723447517154776a5052495336544f703450434c4c6d6a756e34624f347332494935434547346f4973355a67785361386d51505763554951765067516339354d30584e7651646579693366306f313252705278357a443076464f5334624e2b68415754374845303459387836383370314470525132684a794c3776536d476264664949467a6969495355572b77646f4e4e6369766a4636636b672f70374e6a35544f465542553464767049304e4c4357632f386c7a676762794b6b354b72496d51416d41523750636d5a7264457335454f37526c367834316a49732f73533061666c6452716b437335754370326d423278776335475568334b4a73376c507035656e353963514f6d4a616b7a6e47646771354c667077717a4b4c61514d337252466e63556e6d503230786b6a303178317369622f466b3169534c4a3539676332694375376d713744564d4f3366554536476d487153334d6f5a6d317851757073396c345a5934586869594443396a7978723779344a52574e4e67766e4f55435179635653396e66726a736d586736356a4758656453334575706d6e6c4f677a5a3869455459396756564c6178456846776673396e5a666a6f335044424c4b5633746355333044733667726b514578366b6b594b6a484535386151396c5045665772576e3036676841756e706f544e6d6566625a64315a49586c62342b7644424f7a3571452b702b4758634f6b4c31736a6c6e623833612f756a744a53497871392b756b563251775959737257354e586f4d64586b79573276547132476e6a626f57425853725765726535637757327874562b7437583378642f53324d4b74512b426d4964733539365a54702f61475139647967626459744b6254746637692f2f4d7049316c3250794e39573442355738696973667375746448627379383776634e596d6a324246665a6e4a6a4a502b64764d32564f72396251374b4266675254335034656d61796154546d3132716e7532623264774e36764b587873547849335165426370493042656875386845383472574c3352702f52524f716e656e59734b61744d4a3676713270456b62447377734661336b4f2f687231742f773845787636553463563172752b6e4e374f76356e644244556a357a39586e2f2f38615a4a4d655a39666258384f4f6777474f73756553656a6f7359586d38712b436959357061613030647461614858734d75397459526332395a516e62336e2b664a323368665a78652f7166592f6474336877417a6177686265304939542f6d625a713143327154686b4578654a3053397a524a616643496f50714b597435366139594a5238645371397a354f5552786443737a30694b634b3771707072684c7561734475755333734c56386d3069472f706168464a327a5261665852755130657a3847746f6e37783973394979616e4a78594a6151366277756549706d347a4b38784d352f6e375178436d624d375758585052585437546b6659666e4a52337261627a6b50745a502f4b58466b31554a37442b3769644c4a546453334255783033444c7538457955734d4d7855664e77544c527273625062453533576e4d6d66335a786248792f6f364a4e357a675556746d75646c75346b72426455366c2b786c34304275362f767164317a496b425044515a6b582b4756516b4d69512f6f6b4f702f636f5675566c674e65497731795371727272546932384f59645a3034734257667a62616b323650636e574b7278336479576d6370544c517334784d554357304f6d2b4c68303935574c796647522b64505352395937315a726d6e6a38744c6270654739764456374b307a307137374c7972465a6258315a5939355a667a3149707837342b4e6f2f6c6a734571434d4d354f6c4e6d7742597469467162765231353478317a2f6e766b66306a2b5a7634697a4b4441506b6b39426e412b2b4438496b48666e4845556a482f33486b7278665a515463503747456466666e4e3237773358686b787533746759524b6665497646692b3953474a3776737a674f3569766d7876353677334c7363654a46487a353545547678765342616e2f6a7268346431654f4b745675757373747233652f4657537452797466376b4a70486e66776a434f3763344c65655049322b7a665a6a3966526574487a64484c773177624279746c3875594a656b665831504f325a4a464c50535a477977793772352b2f5a6f434a6e5565507a36344c4578596c4c5077346f2b2f684839356151534c2b47544677712f796244367742332f7a705966502f4958795051564f3454436e51726854426a4d4975566967565a644c61507a77796f432f68366b6f2f485759424f456a632f3331356b735133686d764447674553794d302f713842444c614b6d51454f58564a34684b53612f4b657753374852746a703944704a436d77356566306966705342633579332b4576766561755865652b466978614b54374939554e70486e4a79394b2f2f43712f4d6578555137594a4e4772564938716677744a4a767458794a4b5339324a3858426450313174312b6c524568617169676b4d4b4a455a4856516770696b4c5770746b76367a7557754f6b4446726e65596847784f4435416762654a564a473671556671625749616f6a634c3056744151505446374232363842746b716f6a6630696a2b426a6d4e4362444b436244374a79424f3170463378397949655973444648795650425742597a304372354c5245445175424932706d4b412f52554843446c6a53475830716f695a36525a3352305a41314b644e4d4159656566486144634c6b2b51456c5871464f524d39586e51776f71476c4b6d705a516247683038624e5a525967514a69354c316568582f487634654c7150316739475654586e4a76667559424b76594b495a366363796978413343684e3278365065772f76654c6443363837376950352b6c6a343157326550434d2f324f387654352f4d2f73396e426550357274482b5744444d2f37376c54452f4e705a2f53596639345830316774674931346d78596e46734a506465614b776a672f33723056735a79647049416630782f3372796c3553702f3233384649514c7777734e4c2f4972417a494d786e2b6c5164544c666c386e39797a697649424f666739584c4c784c376d505843786475454334436e3858474b2b4f3346393678416234374e6c374d6a52384d3739694136622f7a635438593050676870526c39393534372f69526552386d4c7259414d7a69752f6766652f67666370377755742f325759476247386432487258665237794437377138634657786976754750512b392f672b31524978666f316c58356c485a79716b5046584137342f4e6e7066414f6d71393858766f57455978694c342b4c4265764f6a6b356a6962346f7847392b72583262567275722b632f2f7a4c6439384e4547454f4559484569494263496c424268507771784576752b395967586e4a2f556c6a4169726c4c746c4a4b722b30524b396b324253646541564a6979507a6f7065484944576c4d55657266796955307054336c6b327a42764658632f2f5671784d4a352f354e6a3979305448536a444e6e7847624474396245505169504346783973357031634765673563777435794759536f7a755a6577326b75306865316b50716438642f356b3231452f6537592b503333334563577362513267424e58352b564c57786866542f34793657516c7970506c61484b547963354e516968466465596e59566d71674b69682b466c523253314b30436665597548477756336f4a593852792b59702f333254524366464f7441397a6964772b356f623562467239794257694672623054317a736e336e35434f4c677555584e7964754e31536c6f695a516646616c5a796538464246575a367771374253557151565579687530746f7068393051436b4561436c69572f61707079486836676b6932362f734e6d774237545630364365497a7a68474d7138473053636f4d6b556d546e426c6b75676b794b4e657a62754f3644463453756d3735522f2f656e794e7473574253332f7a3778313247635249392b736f3655536e3031797a48354e66715353776339465a64334c486e374f4638462f742f59463565464b514675784a4c484b46526947676e7656566e4e45767a2b654934664e326b416a382f446845564c7a326361474366696a464d64573546716a46636d57366c2b57744e70334d396d622b34384b5a74422f4b7533436859335731632b656e6f746362334731486b71766c3333593871336c7a445856654b795671366c7448657275626b372b4352734c70692f38694a56646d756c50474c32737475734c7a3852753576562b6f7369743756636d2f54474932492f6d5974795866615a2b592b70436f38335779786f74756b502f767068453678593548356b55527973772b773270424f4954724a384c614d2b347931395875556d574c4177435a5942692f4c7371507a74354e5433313439686b6a31637344674a51693870344b34334c50773332327a594b6c3155354f2b6472494a353545566674754f4f6a61506b5334375057775665665053314973667972544e767454714e49752b4c4b706f6467483538502b5a4e4e542f6d4b794565746f34554c2f756a5845484654546a3953482f7834767652474b74412b74467441385a6f6e4331492f59677253702f683350697069524c37324468614d48386465636b36796d324b66553559464871727a42704b694d7648304d2f6f36774a36636872643564713566467974334e4237714b6c782b39586a7a4f546e7055356e75784e6571695675336c6e7a523857715574764a754e2b536b79342b4d7050614471735067613068557072362f525a3436674461464b462b69725a655935656363776438662f5131485249482f326246316e483561373473364a62322b634e6d466668424969483132704347394f766251344f697a3856544e7371315237576c4c3231484f597271387231582f476f326b794d706d766e61614e715470754b4163695474776e63466b6457685468586c77424c4b635a314873397973716c426652437a65724d4f5970527239306b69524842766c732f7a7637372b724f704c306639304657775a6830472f394e2b662f663362316b33747864585a36635a4e682f756974486c6d6851535734624c336242464a4a4b4c654f435a74777047506151523332544d313376376b6d656464556b614777622b6f613838303543666f4e2f7453707a31793334354478436857414f747a43626747326377384f304f55657474416c3345526a544e4e64724c773464752b392b46374d5656516d43347050316f3447655850724750764e374a37453748617a6f646e38646f44316d474652474e69744874445931554d4c754a5152566f654d744d4630347278564d7153783235633332784b6e554f79744b4959706f78674668796f577a6876367a634366794d434c79644275337756635a664f75376a39747a647245547475736d7a74562f5a5a64655876496f6c75764e70533077394930424e4d715a6b454c36787a7954437972562b6b314f4b2b716648516f6578576573704a5874783872576d365474705a2f444e676e4166577551687a53372f6137645632705342634d534c6347536c426a7538643855396d32674c7031647575473869714a7541725834492f523457314465572f46574b676c76623953334e7a61334e6d4d5a584f714d6f4932303451365a4466383978744b4b35666762666471577a57546e6b7776726f6c6851504f2b6c314b39466f75434e74302f37706e59395a38697957764e524c63444b56365664523874444d6f754a4f6147515174626f395a777355516f624c2f62304e575166586f3757626f584b305450376a4850784d716d6a70367857505155312f6459533768736456395646423579696861434d617746646c446a2b514d6179684f55763534763947743969774a52316538662b45332f4f36545562515478593962434968734232696a6b7a594c662f464b7035446d634a623949464f4144376a534c7674666c6c30556430495955584753594e6d4a363147466e4d73584f363746527459695858562b4a394f6a38736446512b484b506435747469554a7435565048526d57625842524b597950383245696c754e743354685a65346f6c764f336549754e73634c436c7a4f436c2f574c69706c765057576478756d6f37566c464444326334433766614f6c7254643159464c57694676634d504c5279787853396e322b6e6978506f4e4a486251516b3271756f672b494c736652774e4854306345332b4c49336f50723357457472304e52746436615533545841466b667a394659353668393431493730456246476273654a7062695a3151465a7a5072364f302b6b3155656943554e6f6e4435792f7178784d4165724c36794e3670336f67695156324372474957644c54326a486e4259524171684f657835754578456170387567784c732f704d62724a2b2b62335576612f5a696d6a534749616e35675a3178714e766d6b6671485673354a39674b54524c517a307259674d30326431677630694d734f31452f664e49306837424f55326a774741717636674d436f6c553979334e2b43337542444f3572396769777366746f6744474768316b6251746d6659566b57486169446b384138386654476974342f70554f67424a574764566461564d59742f57794f2f46735942435830454856424644314e47543077564f77685246653350476b504d666149776a4f32363649456d595930334c35597969717a35734f6b69785074774e58645a5574466149577731566739586772696164696e6b6753664e514c77654c5174466d79516454454f3468717476596f4a7978375473736462653859634435306b67694e416d337651324f4761564a3071316d776d50316b6e563434656f51463463616d734c366f456c4575706268794e74615638537a6e485a5371475a7a386c465042494a793547743041753472376733774e4d49685442622f4268413958517763494778554842794150586b73374f67544a596f6635486441467248436f5835525357325361674156477165506e4d4f4c65354d7630305a32656e5a426b676865736477794c583743424c57766f64586b6448424c5a4b6a69546133446738595a68485372717668677a5954394a357172336a62554e6a675a7732315a6734494664656164714c31447147684a386f6d6e45416a6c7a4c5052676279767a484f497154466d506c6e754f595470365a4c50496370475a5a3944774b654964454a48466159597936477061735362314f3546683366596e76685157563053677479762b5049674a694679784663395176426c7734675130473133365371496b306f566e625052314f6e623552474e3054494f494d34785a4c4830435754786b4576767065374d5736324b4c326d4b376d3252446d32687a324156704b4c42586e6f416a76366b366576675a316b4b4a4d716335616648494f76345a627538785641736f2f5744577a6c584c316c6e66315573315a5449776b6268484757307654436630544743676c624e39796e7444366c46664d725877632b7378303242446d6368425074672f45595874564e48384537456b345432346d366464626a3634735a7374647a3544476a7239686c4e58474e3842522f574a436c6243355547572b694865536732304b4a7961743176495a78453534754976464e3178446d32595a797146796a476148674e78444d4b666b393768713655614455594d6866554d2f6d632f3974783441504867557470774c5448684575524d736b713434346c6274356d356e366f376d56435237667a72474d6134304e356b43624a455271494e446957506f6a50784c394d39445736697669476a714a4c58394b35366d2b676e79534e79596a795673472f5765566244456a62483136507338594b6d6a476d32414c54554f4b6d62394677624938305852724d746850634e3575566b7433554b343071726d6d734d38362f316e4c6a64687373306c364f61324d625a6173643050344d35305771436b4348627869412b6b786378484d2b61314a316e76704f6f73786631706b39634169597845664648536b39517530504f7366357031686253732b443144373438716d7969566a374f714150346a4e7847452b5a55385369367741396c687676496538766d3072636f4e322b69446766324979303342613255646262416133724445383330486149707970394f6d7834414f6f334f3159526f61367a51565878543248633964746870545774646a647356615753745869697a6c5a736537364453493665466632334c3472562f666b624264506d64633263514c332f545538717335664b5a42584a6669376e6c615671764838567a492f304333546962474c71544b494b33317373716c56457a76474e6f394b494a69704e5a724d444e6656555a356a30716d6f625a504f7970733651336e62665534523039595a314a564830627142706a4f5574784650623172305833794d4a6a35752b58777a53346d4844646653516c5472646c463057782f3230744336395364615264386334594c5251467a467655664538324a7a4f3836536f4e486d654861697050552b4753612f6e6159503874674b526c742b65747852622b4b6632576f585a753176376c4c386c71775a4369374d6f4958364b67714b425335327148495957736e626b3545364d637943654e69655734644c6b785371774768354136424d346e6157584e6c6c3666523448356a656e4a792f4150533535636f5261335679396430783945647941492b39447a7372504d3852314f68757978374c4f4d2b6a6e2f4f6e30346d596d4d59767a39587056444a4b6673674f6f6e7079666e70316476627538646339663830696f6a58314d676c57634830377068556e4d6861464177657a3644424938696f416443486e387a633169395a6c6f515a496e3576623639504c6d394f7a322f4f72532f58563266584e2b64616b734652347346597265536474444e6b5965316273675442416d45746765387848626b664934766456717a54334c6f414e6a396e3478536835626c677a34367a434a504439527a4458724d4f527057415a687675542b77487a662b794374376a487a4e7965374c6f496d4f486d43376c69536659334549735669517655473351596752576f4b3665716770776c4b6a614c6c7876584368627552556457493351567877714b344155474e676f6b764e2b37464838547569726c5a5269444f2f6f4f58334c762b7736593657683731336f3954694465724946486874547053487531484667584c4c323765694656766b524d6a596563524f6b437030355463373843346a394a4267757532656d45506b396f5663312f50666a7039643348726e72352b63333770586c39647a4754584633314a31757a6d35757a713876623636714c4d6c6b7241434a6945517475303644674d3156527743357336434e69576a51572b394f6a4e304344475464676d77596841697a6a386d77446c594c2b5a335a362b50723039625446676d545a463143456163467a507a6d626e763836756d7a6967435947446f47574e6d654a364a7279566b596b74674b457a446a4246304a3164766e737a757a373938574c573168396f49575253694d646a61594b47324b6255786e536b2b715367753259595968505a44674a4541343675475461784361684a7942677475767a31394f4c3864524f7968527a4c495251354934522f64656d574b76726a3665335a4c7955627239326232635873375062717573344d784a6a61784c62354a77374a6f7578485a6746694f6841544f4d49356453324d2b6b394f45674c3937767a79316e62666e50366a727261595078734336344a74305661696357345962456439566e5367374a3653414e7a2b61716f7367416b49374e6c50325a372b4e31686a464d416a57314473576a766e4a6343543034734c392b7079566f66304177534551704236435141784e5446466a6f3354774977416443787341684d35674a725541734243474750627472464e4b48535179512b75413154737337413558467854462b7132494448734c705159456c583851624655713743666859757767392f6462392f386e43304176776758586a2b376e396452382f3275667272732f6662723668394b69306c78356c3974526b35454655537a5730617852596235376d5964684d6e4a7a482b622f6d2f47304c2b47424338443745464d7a4d664755614d366a3958525675614d6a70757a484b433452326e5249754e456573726c69687254714c68506262635269783958676e32777733743059697a2b4c53766d6a5a52544855697248332f7a6d436a6156313571644f504553316764793033364b452f3948704d57416c736267756f474e64456d364279347546304d6b546e43544e3675597859733175464946576943306167456d774a30775834445537386943423855496f536b6f67796a6449454c58567762524767646f524863665449466c6544746b74574337754e632f427537624777636533644d563539704c784f3577525632642f4c6a7864585a333977302b5a664f6a67734947382f2f77425a7547353738504456492b2b6674374d59397633542f666e56644c7a625938706c76412f5454727774345a503174646e5a322b6a66333750547436646e353754394c336d2f304d6c39672b656e647859563766586f375339466b736d3455412f6c466f704749327678305646546b38647a63706a685331584e2f6d6c3363336a524b49574f78544c537a4b304742396e316547647a3545585268364b356b2f486d3271564d624f356151387543737a3058506a754357666c45517149346553306d527558694c52625a684e624444796b7436386d6f6537343864554931554676716f6e644174334c4730547246524b59652b2f4668504748334d6b6e4c6357505331514e703550345638534f6241485533712b704e5555766370477a45576136466e6273512b7369686d4c67735867536354765575483341466f4e483168484e7946624f4575676f39757842356b2f57527276444a4264515634326c7173574c4c3463764130506758774235626c31616d372b65583870306153596c6f413263676b784548414d57324c6d4a594e6251524e44444841467157556d4b426a44314b656743644a4a2b6f6b374b5574614c696c596837634257467938754f70564e747342634275517936444d5a4b4d344f343854457a4a74536b50516d4e567567444343394946464337744c644265796e70562f71375033422b76336c31796d3232484f716d325938644e306c4f73426d723477346774486e3232474b38744c56422f567256704d497231795177666c737a535630336850612b46745a663972717234746974433561586b53504e35777556736c59774479426835386175616b314271556f6777736a41325459494968546145446b5a4549516c73347072646e745a786a515a35436571314a57416847396870466f7363514e4a38466d426745384276524a5043424c7646424169314562574a4137464b6461754a43645635636b774c32644345304c524e4378424348597763322b356f6535504239426230546a327962594951635279467a6f4d6d70683770565a564d49646474597471623947356d5a322f647439666e623262754c2b632f2f7a4b553252505470425942314449684a546143304a4c723168716934654c713738496b4947705245316b6d744d634c50435068657661473078356f49355846537761662b62573857447044623266474b6e36532b62576466386e636f544a61647374646d6b484f39727a6b7a514a6371434f334355737850466e326e4f4c6d5a6336712b73544c6e525870436d4c33337977612b44696c612f7779594b7646466f513645654536584c44457a626b624a356f474b485761486b735a75772b50717a486971515053515644384c356c4e69423643556b447142425566676f78566e796f5952574a795145396453436d6f655070346b524e537046556a685045576a4b51416a7159416a7152413571536e726b52754641573176475145485673346f366735794369556b2f6255612b4f63696f4f4c524c76763774546457375851504a364d63766b387873756d4d4d5a5438765365746b724d67657a364e4f695362786e755844714d492b52796444693656413548465370476836524c355a42556f574a30574c7055446b7556617853656344396a523857544c636f714a427869564e795274393864307962794a36755a633268346f74536754636b366b5633323149677068342b6d4a396335395256716f624d564d4c70495374626a7a68756f553161424e7072412f47485a565659306b615670476773486a6c626b774b363334765343486b3034383131764955396947636d4c34547249554e61336e41777465735a384e325233636e332b4c556f4b434b4f4a475873795546324e684134476b694876365974384f316f4f65495756422b347855696f676a4b616b6242564d316756336f2b5455686a616577494f716a764c6f4f6f5169615a57757739687972787a6a34363243685a6377742b517a3439746c4b2f6241565057744b4f6a32517835502b6450576e5265426e3768656471664e796576415430367a667772767a48554d62327a4e79587a4774596e595235647a5248425053302f4950764647614f2b4779676f4939652f4d6c616f696a532f4e6865657173584f3668322b6d6d5839796b2f3579396868397a4b56624471336662434d792f4f5430347530763956345671523649426a435a73305934517a57644d6c4b48334772472b634769784945416d686851597072556f52695a4671474f36546732784a6851684b434673474e5347324948453873424e7258544879317145644e474e734359514e4f47556c2b5331636e366558627031672b3173616c46546366434546416241456f4a73544331694f5859447157576952437754574935694e6f4555477961794849734730494d5452745a4e67515532635332415345416a5350726e33563977496751516830454b4d5451746b3167457874546a444731495849733238516d734b434667415653796c4d6562476861794c4653455347454d63493267526151366869716b3656306d6b305069456b30376572363961782b754e4950446a477a646851434d51594f67734347446f41494f7a6243304d514f784a62745348333457456335346e68754966696144732f4a7577442b3965677433496a4677654a5275736a534843376e4d427665566c7942326d353630674d6c7671702b415a316449624f664536733777417764647941716334466a453271482b497633493866692f636978654439794c4e3650484176324936657634767172375a4e6864712b532b71756b353156616635554f713645747059626458315565774f5a564e3348373353446f706d4f363432576c53546d6b5478497a446e57662f642b48532b2b7836674c6c2b756f4279746e33596f5332546963382b684375503457757433483965792b385930657978785679454d706c374a3041476a375a4533624a38346e44496f39697056527945464244424c3133754b686672434e425864347266665872374e704637625a7462454c69514f6a594a6a5164516b786932525a4d4d335762554949524a6852595567764241524a4d54756334746977437147506246447555596b6f77535663344e7161325a574a67645234384c4547432f767959683056546c7377443759315355652b497232725a7757564c467248515a356c7a716271646b76616a33337776546c34734e385a666a52632f574e386446326479766b2b486578733369547a2f517844657564734c594f366939654f6d5342703232763731613956546266484b536d492b53684a7a665a49776e316f53504f65694b70636d4c47315377694f6b64467947515671446e34482f6251762f766648584e4958653372676e6a734c574e4248786832446a73732f2b366e48425847385876577666456132384f56754e676a783348344c774d613569674d425552704530636730493063544a526a49323255696558624b5236456f326549414f4a396c4939684a6d6b2b6e43624449717a435a71595461337550467831744561585a4a5263545a5269374e396f70414a7446704555653837465033476350655a6f395232774259685a77306f332f445665346d4f4b415671745966476143554b47706349356171423270665361346c4c44597a7963596b4c344b446a55704e6935626a55432b6a4a34314b5475733634314e525579636a55784b4d784d6a56427930576d396d684a64357a5a33506a49424b453266317a6852693430745566726b34564d614a7047467545364b587556633270726c78734e72776871427778756f55686378693843574e4b31746f633254352b4a42772b6b336c33564845652b6947664e5878612b394661355561584f6e5a6f443767616861554f376a75466976643738464f55307156433447372b66655651506b5457794a316a4e314f4472696859316f50343654494c776b626e2b65764d6c434f38557036774652744a6e6772624c3944595376724c714b6b305656316e6a7072527165546d6b492b56594e2f5545693947786f7337476572335a655864624a6b4b496e4667764b6c7642302b38505a324e663263747631703932537a4c6c745a7a55496970466563635331397449344b73664e4f6c746c44412b31516d584c654946304b2b383843346476776c574c44705a42664e784975686951774d6c616a4b70666f2f37684f3277597a344c4874555675304f387030364248634a395831492f54464339505668552b745678616f6a33306a6778346e4d3174572f55526e795970765931576731682f4469585270694f55554d59784f356e6478323676727a32314965716f592b59762f3749797076716846487668716d6837626c67757967466a463859443247545779754c5157766b564e7a6265506f2b2b33696372774b2f6665465058344b3176613837456d2b683349364a78586f704b396d5a4a5a57644455704e61566b75423755784a2f6d374175565274516a792f59694b366942662b68664b67796731725a30483864536e52597357374542716d397675306d58336170522b6432776f34684e6177494b755a67365958565845372b61675754634855715a737541476b525a6630796e70776770752b543476575649484b31712b376c5543716c72395079576e30756c57672b69516e5663775a4c626d796935703730386b455a2b2b572b4136675862386b355a665469352f633745365247765051746978434c5174516b77494859306a6b767359727762636854374458332f7863514654484f5a385a56484f48565846626b55677564782f6333552b3830567853573553786774444e646f4156713244623453704b732b635358415074666f385261694a2f67704f4453684c4b572b673871584e756d6e6659655a4a48325453786a377041542f4c2b764362752f64376556324c66622f6d33697657705373416c44646d4f754b5371373762536c56424f6630646369576b6633344e6c2f77705a736b32726b6e586b3362475430396576727a6d4e634f713371316e32304e3055586153384f66324865334e3764583336383877397635323961562b73686762446352667377757368444e78356f4e7236566f36574666575832506457712f6a6b4c4533767a713475623639507a3237646d396e46374f7a327176346c4f5149324e6845314c596f5241685a466c6b326741366c743257686f3564754e313175747a745a686d734432666851744271445a2f63582b39636947392f6b6c73567758554c2f6d642b3976316d48637147653150355756526c474172575a43644367546b714a2b724b784c4f4d303955375a6966724957374c51377a72516c672b643669305655486a456a5575597243353475483256507353396c4a6c306f75595667785436644c6b6656422f412f6f503565376b596e4f5a305950334d466f4a61314a423153365a6d2b5974414533544764764c79655863782b50723264755a6e503472737143416e466a675549704c614a414c47524352314349616e3371456d3571693365432b6a2b636e72352b6d4a3233594864524e5143454e73414f52545a466b5957785a6a59466e4a73596c4948517073514374485147536b396c4c793975506f6e487a6e464343434c324468645167353950396d4e675731573679394b716c594d6e637756352f43486e5844374541494a34427a333636677262493169645a6c7163376b724c343764657938575849317a764c516265367445334f476d7170644b624232356973365841304851455765375a716e3433475730667469745377635074716a4d2f654239504b494b4e5762792b5636375033373242393674534c74646637394f4e414749614d54336371314e33574b706e306f6e6c6a4a336e30756e6c44585033707a6675724e665a3563644b544e454e7144414d514845474a676d70705a447261477a6c7271785051544a37435072507a3149595052592f2f474266556c5872714777707151444246556a74645a55453176672b79375a33484e57397650733173327631373538392b6248726977415770594e624163435970735949784d41614a6b32426369304d45434132744c727854622b322f4d3373357662307a64764f784b5237476f345946495445555349685731694934695269536d3171594d6f70685244694a55546b5a53534e41756258627670596e313263384d6e4a4b55697a622b6f44553348424e53324c4174687977596d674a526747774a45724b4872362f71704b4a6575765851514242334c775359424e7343574179304b55336b3446454154554543514252316b49774147372b72724a655a6d39762f657a5337506871514373594f6741327a5478445a3048456942436242704132776a427a735767656c504b545534565a7778424e332b777a322f2f4f6d7167777754556f41633077454957424169434579415276462f2b772f3335767a6e793950626439657a66754e414e73484974414367466f5555456f516f425941366733635a64754e6e79592b7274662f68386a48316345716573674669736b79326a6d63346f3231375741556b6e4d785766536e47353243387a4c566b756a4a4e4a374c693038456950352b6270362b34345535373938766e6266444134735237324978696351646c6375505a6f707259666970344a6a47684668396135483934687453576f795a472b38777071576e313368672b3831597246703157466d594b664e614254476c504e557a546d564d446a573572346e4b68512f59485a55743849657068733650516b4c306b56326251786d315235426872536730776b7870544864654535745245704e32672b4a7a6f6d5950444d716f4f5565706956576346547866504e2b6b456850376f4d4e57434d3656784e5a464e5a313174544c724e7134735854664e77554162574b5531747a504a4e4c43376665786f62752f313848693758716b77576f36653070787a4664465a55777464744f33573652386e336f4f796b49612b526a50467449766e73427156576a6c4f6748492f6b5a7a3739684e2f55506f4254346e3048596c724c32654b5a306e777153446732704c364a78756467764d77507a4a726134745042596b65733258377a30647244366a74416f716277652b716b75546a2f386672302b703935493831515634746c456d5361466b5955573943784961595559476f526841473148597770686735434e72497341676b6d796e744b4e614c3475306e49704151675168334c5242524153436c794d4352457562586e497068485876516c5851637261555a312f475465706f4c6b2b625567636f67664b65676e3749623554326739764a3639765467396d376c6e463664642b3563495977417359434a494c637330715930524a51425332795245656276796d6d31576e732f4f306c6c5255704561674830726878613366444f37664f322b6d6433636e50343863322b7655732f63345a464e414b6b44624570734535695736546941516f66593245475753536b463674756f5a62503739657a30646363574c6743324134686a6d68536b73303441734243773051673358434c392b2f5835626366474d6349327367476b47434362576743446c46644343484b6f7163347343786476386f4d4a62746358384f5a4c7242774a4f6b434e31634e6b4c6430667666472b724e626567754e70657678544f616831474144664f3330766478424374395479547947756d6264516b33706c2f47547874344a6b4f5036325a53794c515775657a364639704a7831685638707464626a586a6c534869304d2f6c7141632f7673704975646771532f5230482f7958686941505936745a5776335455666a6a6451743143534537386d393546466364352f4b6967673331382f686f6d722f41334d672f665a58544a783939367a4e7532374e4a432f4e753372754534694c34793950456c755a30383956776e3639313451757347695071446e5173467748666f4e776e54634b646735382b6e2f33303559686a632f72364639554c7a4136557869574161505a5a49426f3674396647414e314e633333723047456c673537544d74715974503947416d4658424e5635735045543279586c6670745535673939464b31633846586d5a486b52776278624f5878636b6b346f637643564b6a6675715349494b6d7a4d664e626856617835783148763353666559374c55392b45546e3642585764676a523443424939727379694f41346f6472704d70775476574f4a79756b7a796f34324256762f61527158755a4c7467715a2b484c6f4e7174466361676e6b59726f6c445a62642f71722f34636e632f32306950784346694172664577544c574e7732416c4852514a756545396562525643494f79757879554b625a3661444d387051325151646c616e645176495170703770395965356f463956414e744a4a6361464e3561616179505134716c366f422b53716d6e54324f4b764771357264565a4f5171527857453438576c395548564e5a704364796d4b754b307243366e5a51467454737653376253717652373572616e3630366b43787a675856514d796b5763716357687853467867682b4f4853764b3633552f78786b7444754f716c5a5846584a5734696c315343312b474a654c416b485244526c4458524c6764453947564e564b63444b73363563714e79647964336c355a57443152466f753643326c4361567972757658323052744a6f6c39554e37544238566f322b6271655661626d2b524b6d4764514a7656494d2f316831314170503052356b4244687a4e4c4f4b50634764435a4866364979767a5236617750384a542b4b4e50323132796a467a63766f4a636830504b73497a33534255775931775366356474307533574f6766615042674833474735734a78414c666354434f4b613048506c43485335726a593053642b4675322f73786a4b2b693354354c6b773766526557394631457a48643972664c71506e696864316363414c4448712f35324679566f766b5478324e6a583573623078636e4a43776c54422b624a7257663670553733484d68634b324572774a63784c78583457416438434c756e57455a416a676f4347516c3149356a7135684168444b4e7532424443384952583445783076626f51686e47586c6d633955306b5342665048704979475a6672426f6d676475655831596c554354764d757135644776674e6d424c455272684d6a755139696f2b6a414f6971796f53512f525234364b57705748696f506e56545a6c3676314a77363146526271314e666a5071724839324352317a534c4c6a41577838463878647a5958323979786f37574778622b6d323032624257454a77575a4a36763838346555334c37665430353362496d38567834697667355858397959725a5a48373750706c4a4474676d3069356e734a57786a4a5a364e73684b754c4657476e4b6c5a4548486d786f7070534f4163745666615a2b59384a6b78646d78466959524636595a4372626c434a464e536c5361367755726563697876665a436e332b654666755a6f5350713958582f776b4141502f2f304551477335726f4151413d6945787465726e616c7388a2664f6666736574841bffffffffffffc6611bffffffffffffffff1bffffffffffffffff1b07fffffffffc2c706853656c6563746f72841b30b9224cd18a4e7c1bc71f0c828480ecb01b8de0747c8cfdb4821b04c9700ad999c431a2664f6666736574841bffffffffffffa8a11bffffffffffffffff1bffffffffffffffff1b07fffffffffa32b06853656c6563746f72841ba6951e73bb6dfe241b05e5ff539dbeebe71bdd254888370955b41b043ef1349908885ea2664f6666736574841bffffffffffffbb811bffffffffffffffff1bffffffffffffffff1b07fffffffffb73906853656c6563746f72841bb22ea4840c873b8b1baa7fdf9303e1d7731b704e592f223c3de61b00bda65049efea59a2664f6666736574841bffffffffffffcde11bffffffffffffffff1bffffffffffffffff1b07fffffffffcabf06853656c6563746f72841b279f5f4dc8b4c7b31b6ac884a41a1b5bd71bc1307f4321f00b881b04bc8012967069c6a2664f6666736574841bffffffffffffc1811bffffffffffffffff1bffffffffffffffff1b07fffffffffbd9906853656c6563746f72841bc735e82ed1e23e011b9ee8c8991bbc1d151bacb56cf03bbaac5a1b00186ed02a71bd65a2664f6666736574841bffffffffffffb4211bffffffffffffffff1bffffffffffffffff1b07fffffffffaf6306853656c6563746f72841b04b9244ab52a4b811bffdbe496a2c48be11b8a5d0118067bf13c1b07102404b615fdd5a2664f6666736574841bffffffffffffc9c11bffffffffffffffff1bffffffffffffffff1b07fffffffffc65d06853656c6563746f72841bf6c53d175ebbcd9f1bdd07ee6aca2299561bd457faeea1e288671b0754ebc0b261e0b1a2664f6666736574841bffffffffffffaf611bffffffffffffffff1bffffffffffffffff1b07fffffffffaa5706853656c6563746f72841b4298606763e030411ba7525ed75dc70c951b01c0a0b4d48ac5061b0624e8d006b62cda6a4c3148616e646c657273806c436f6e7374727563746f727381a2664f6666736574841bffffffffffffd2411bffffffffffffffff1bffffffffffffffff1b07fffffffffcf6506853656c6563746f72841bd1c59afcd3f9742d1b083befda3709a3ed1b3142bfd1003b62e21b041f80cbf54be289")
				assert.NoError(t, err)

				stateDiff := map[felt.Felt]*felt.Felt{}

				for i := 0; i < 10; i++ {
					stateDiff[*new(felt.Felt).SetUint64(uint64(i*10 + 1))] = new(felt.Felt).SetUint64(uint64(i*10 + 2))
				}

				return bc.Store(
					&core.Block{
						Header: &core.Header{
							Hash:            &felt.Zero,
							ParentHash:      &felt.Zero,
							GlobalStateRoot: expectedStateRoot,
						},
					},
					nil,
					&core.StateUpdate{
						NewRoot: expectedStateRoot,
						OldRoot: &felt.Zero,
						StateDiff: &core.StateDiff{
							Nonces: map[felt.Felt]*felt.Felt{
								*key: nonce,
							},
							DeployedContracts: map[felt.Felt]*felt.Felt{
								*key: classHash,
							},
							StorageDiffs: map[felt.Felt]map[felt.Felt]*felt.Felt{
								*key: stateDiff,
							},
							DeclaredV0Classes: nil,
							DeclaredV1Classes: nil,
							ReplacedClasses:   nil,
						},
					},
					map[felt.Felt]core.Class{
						*classHash: cls,
					})
			},
		},
		{
			name: "basic with v1 classes",
			scenario: func(t *testing.T, bc *blockchain.Blockchain) error {
				expectedStateRoot := hexToFelt("051099998c4c482b6ab11ed287d9fd1bc1b2e0dafca099cfc23e55c8754048bd")

				key := new(felt.Felt).SetUint64(uint64(12))
				nonce := new(felt.Felt).SetUint64(uint64(1))

				clsHash, compiledClsHash, cls, err := V1ClassFromString("01b5126eb60b96de5b8e45c1334ad44d23dacaa76f748ab08b23dac43f3958", "a262417419aba565436c617373da00010006a763416269785f5b7b2274797065223a20226576656e74222c20226e616d65223a2022627974655f61727261793a3a53696d706c6553746f726167653a3a4576656e74222c20226b696e64223a2022656e756d222c202276617269616e7473223a205b5d7d5d6741626948617368841b194b356d26f0cd761bd738e24f884338411bc2749e3d7f8913051b0459fa72a5e413526750726f6772616d8b841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf0841bffffffffffffff811bffffffffffffffff1bffffffffffffffff1b07fffffffffff7908400000000841bffffffffffffffc11bffffffffffffffff1bffffffffffffffff1b07fffffffffffbd0841bffffffffffffff611bffffffffffffffff1bffffffffffffffff1b07fffffffffff570841bffffffffffffff811bffffffffffffffff1bffffffffffffffff1b07fffffffffff790841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf0841bffffffffffffe0211bffffffffffffffff1bffffffffffffffff1b07fffffffffde2308400000000841bffffffffffffff811bffffffffffffffff1bffffffffffffffff1b07fffffffffff790840000000068436f6d70696c6564a96548696e7473425b5d655072696d65c2582008000000000000110000000000000000000000000000000000000000000000016842797465636f6465806845787465726e616c80694c3148616e646c6572806b436f6e7374727563746f72806d507974686f6e696348696e7473425b5d6f436f6d70696c657256657273696f6e65322e362e307642797465636f64655365676d656e744c656e67746873a2664c656e67746800684368696c6472656ef66b456e747279506f696e7473a36845787465726e616c80694c3148616e646c6572806b436f6e7374727563746f72806b50726f6772616d48617368841bb3799734fc0a22761b73a1705363df43691b78153b3e72b8b9ff1b0735af66c53fce8d6f53656d616e74696356657273696f6e65302e312e30")
				assert.NoError(t, err)
				clsHash2, compiledClsHash2, cls2, err := V1ClassFromString("0cc7d5b4b3f7f112209f743ed739f97570d83d7b42c3516bd955d4b053237dd", "a262417419eee165436c617373da00010006a76341626978615b7b2274797065223a20226576656e74222c20226e616d65223a2022746f746f3a3a636f6e7472616374733a3a546f746f3a3a546f746f3a3a4576656e74222c20226b696e64223a2022656e756d222c202276617269616e7473223a205b5d7d5d6741626948617368841b12a4a837ffa449ba1b6eeb23f3ef6440e31b453422a17e9d29381b02cbf391fe0a8c9d6750726f6772616d8b841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf0841bffffffffffffff811bffffffffffffffff1bffffffffffffffff1b07fffffffffff7908400000000841bffffffffffffffc11bffffffffffffffff1bffffffffffffffff1b07fffffffffffbd0841bffffffffffffff611bffffffffffffffff1bffffffffffffffff1b07fffffffffff570841bffffffffffffffa11bffffffffffffffff1bffffffffffffffff1b07fffffffffff9b0841bffffffffffffffe11bffffffffffffffff1bffffffffffffffff1b07fffffffffffdf0841bffffffffffffe0211bffffffffffffffff1bffffffffffffffff1b07fffffffffde2308400000000841bffffffffffffff811bffffffffffffffff1bffffffffffffffff1b07fffffffffff790840000000068436f6d70696c6564a96548696e7473425b5d655072696d65c2582008000000000000110000000000000000000000000000000000000000000000016842797465636f6465806845787465726e616c80694c3148616e646c6572806b436f6e7374727563746f72806d507974686f6e696348696e7473425b5d6f436f6d70696c657256657273696f6e65322e362e307642797465636f64655365676d656e744c656e67746873a2664c656e67746800684368696c6472656ef66b456e747279506f696e7473a36845787465726e616c80694c3148616e646c6572806b436f6e7374727563746f72806b50726f6772616d48617368841ba97fcaac59fda9281bcb5930ad34825d5c1bf25090cae1f11f781b008272c3d5d2ae0b6f53656d616e74696356657273696f6e65302e312e30")
				assert.NoError(t, err)

				return bc.Store(
					&core.Block{
						Header: &core.Header{
							Hash:            &felt.Zero,
							ParentHash:      &felt.Zero,
							GlobalStateRoot: expectedStateRoot,
						},
					},
					nil,
					&core.StateUpdate{
						NewRoot: expectedStateRoot,
						OldRoot: &felt.Zero,
						StateDiff: &core.StateDiff{
							Nonces: map[felt.Felt]*felt.Felt{
								*key: nonce,
							},
							DeployedContracts: map[felt.Felt]*felt.Felt{
								*key: clsHash,
							},
							StorageDiffs:      map[felt.Felt]map[felt.Felt]*felt.Felt{},
							DeclaredV0Classes: nil,
							DeclaredV1Classes: map[felt.Felt]*felt.Felt{
								*clsHash:  compiledClsHash,
								*clsHash2: compiledClsHash2,
							},
							ReplacedClasses: nil,
						},
					},
					map[felt.Felt]core.Class{
						*clsHash:  cls,
						*clsHash2: cls2,
					})
			},
		},
	}

	for _, scenario := range scenarios {
		t.Run(scenario.name, func(t *testing.T) {
			d, err := pebble.NewMem()
			assert.NoError(t, err)
			bc := blockchain.New(d, &utils.Sepolia)

			err = scenario.scenario(t, bc)
			assert.NoError(t, err)

			d2, err := pebble.NewMem()
			assert.NoError(t, err)
			bc2 := blockchain.New(d2, &utils.Sepolia)

			logger, err := utils.NewZapLogger(utils.DEBUG, false)
			assert.NoError(t, err)

			syncer := NewSnapSyncer(
				&NoopService{
					blockchain: bc,
				},
				&localStarknetData{bc},
				&snapServer{
					blockchain: bc,
				},
				bc2,
				logger,
			)

			err = syncer.Run(context.Background())
			assert.NoError(t, err)

			state1, closer, err := bc.HeadStateFreakingState()
			assert.NoError(t, err)
			defer closer()

			state2, closer, err := bc2.HeadStateFreakingState()
			assert.NoError(t, err)
			defer closer()

			sr, cr, err := state1.StateAndClassRoot()
			assert.NoError(t, err)

			sr2, cr2, err := state2.StateAndClassRoot()
			assert.NoError(t, err)

			assert.Equal(t, sr, sr2)
			assert.Equal(t, cr, cr2)
		})
	}
}

func TestSnapCopyTrie(t *testing.T) {
	t.Skip("DB snapshot is needed for this test")
	var d db.DB
	d, err := pebble.NewWithOptions("/home/amirul/fastworkscratch3/juno_db/juno_mainnet/", 1280, 128, false)
	defer func() { _ = d.Close() }()
	assert.NoError(t, err)

	bc := blockchain.New(d, &utils.Sepolia) // Needed because class loader need encoder to be registered

	targetdir := "/home/amirul/fastworkscratch3/targetjuno"
	os.RemoveAll(targetdir)

	go func() {
		http.Handle("/metrics", promhttp.Handler())
		_ = http.ListenAndServe(":9201", nil)
	}()

	var d2 db.DB
	d2, _ = pebble.NewWithOptions(targetdir, 128000000, 128, false)
	defer func() { _ = d2.Close() }()
	bc2 := blockchain.New(d2, &utils.Mainnet) // Needed because class loader need encoder to be registered

	logger, err := utils.NewZapLogger(utils.DEBUG, false)
	assert.NoError(t, err)

	syncer := NewSnapSyncer(
		&NoopService{
			blockchain: bc,
		},
		&localStarknetData{bc},
		&snapServer{
			blockchain: bc,
		},
		bc2,
		logger,
	)

	err = syncer.Run(context.Background())
	assert.NoError(t, err)

	state1, closer, err := bc.HeadStateFreakingState()
	assert.NoError(t, err)
	defer closer()

	state2, closer, err := bc2.HeadStateFreakingState()
	assert.NoError(t, err)
	defer closer()

	sr, cr, err := state1.StateAndClassRoot()
	assert.NoError(t, err)

	sr2, cr2, err := state2.StateAndClassRoot()
	assert.NoError(t, err)

	assert.Equal(t, sr, sr2)
	assert.Equal(t, cr, cr2)
}

type NoopService struct {
	blockchain *blockchain.Blockchain
}

func (n NoopService) Run(ctx context.Context) error {
	return nil
}

type localStarknetData struct {
	blockchain *blockchain.Blockchain
}

func (l localStarknetData) BlockByNumber(ctx context.Context, blockNumber uint64) (*core.Block, error) {
	return l.blockchain.BlockByNumber(blockNumber)
}

func (l localStarknetData) BlockLatest(ctx context.Context) (*core.Block, error) {
	time.Sleep(time.Second)
	return l.blockchain.Head()
}

func (l localStarknetData) BlockPending(ctx context.Context) (*core.Block, error) {
	// TODO implement me
	panic("implement me")
}

func (l localStarknetData) Transaction(ctx context.Context, transactionHash *felt.Felt) (core.Transaction, error) {
	// TODO implement me
	panic("implement me")
}

func (l localStarknetData) Class(ctx context.Context, classHash *felt.Felt) (core.Class, error) {
	// TODO implement me
	panic("implement me")
}

func (l localStarknetData) StateUpdate(ctx context.Context, blockNumber uint64) (*core.StateUpdate, error) {
	// TODO implement me
	panic("implement me")
}

func (l localStarknetData) StateUpdatePending(ctx context.Context) (*core.StateUpdate, error) {
	// TODO implement me
	panic("implement me")
}

func (l localStarknetData) StateUpdateWithBlock(ctx context.Context, blockNumber uint64) (*core.StateUpdate, *core.Block, error) {
	// TODO implement me
	panic("implement me")
}

func (l localStarknetData) StateUpdatePendingWithBlock(ctx context.Context) (*core.StateUpdate, *core.Block, error) {
	// TODO implement me
	panic("implement me")
}

var _ starknetdata.StarknetData = &localStarknetData{}
